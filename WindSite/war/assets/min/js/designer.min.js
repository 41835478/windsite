function WindResponse(a){this.subMsg=this.subCode=this.msg=this.errorCode=null;this.body={};this.isSuccess=function(){return null==this.errorCode};if(a!=null){if(a.hasOwnProperty(TaobaoConstants.ERROR_RSP)){this.errorCode=a[TaobaoConstants.ERROR_RSP][TaobaoConstants.ERROR_CODE];this.msg=a[TaobaoConstants.ERROR_RSP][TaobaoConstants.ERROR_MSG];if(a[TaobaoConstants.ERROR_RSP].hasOwnProperty(TaobaoConstants.SUB_ERROR_CODE)){this.subCode=a[TaobaoConstants.ERROR_RSP][TaobaoConstants.SUB_ERROR_CODE];this.subMsg=
a[TaobaoConstants.ERROR_RSP][TaobaoConstants.SUB_ERROR_MSG]}}this.msg=convertError(parseInt(this.errorCode),this.msg);this.body=a}}
function convertError(a,b){switch(a){case 3:return"\u56fe\u7247\u4e0a\u4f20\u5931\u8d25";case 4:return"\u7528\u6237\u8c03\u7528\u6b21\u6570\u8d85\u9650";case 5:return"\u4f1a\u8bdd\u8c03\u7528\u6b21\u6570\u8d85\u9650";case 6:return"\u5408\u4f5c\u4f19\u4f34\u8c03\u7528\u6b21\u6570\u8d85\u9650";case 7:return"\u5e94\u7528\u8c03\u7528\u6b21\u6570\u8d85\u9650";case 8:return"\u5e94\u7528\u8c03\u7528\u9891\u7387\u8d85\u9650";case 9:return"HTTP\u65b9\u6cd5\u88ab\u7981\u6b62\uff08\u8bf7\u7528\u5927\u5199\u7684POST\u6216GET\uff09";
case 10:return"\u670d\u52a1\u4e0d\u53ef\u7528";case 11:return"\u5f00\u53d1\u8005\u6743\u9650\u4e0d\u8db3";case 12:return"\u7528\u6237\u6743\u9650\u4e0d\u8db3";case 13:return"\u5408\u4f5c\u4f19\u4f34\u6743\u9650\u4e0d\u8db3";case 15:return"\u6dd8\u5b9d\u8fdc\u7a0b\u670d\u52a1\u51fa\u9519,\u8bf7\u91cd\u8bd5";case 21:return"\u7f3a\u5c11\u65b9\u6cd5\u540d\u53c2\u6570";case 22:return"\u4e0d\u5b58\u5728\u7684\u65b9\u6cd5\u540d";case 23:return"\u975e\u6cd5\u6570\u636e\u683c\u5f0f";case 24:return"\u7f3a\u5c11\u7b7e\u540d\u53c2\u6570";
case 25:return"\u975e\u6cd5\u7b7e\u540d";case 26:return"\u7f3a\u5c11SessionKey\u53c2\u6570";case 27:return"\u65e0\u6548\u7684SessionKey\u53c2\u6570";case 28:return"\u7f3a\u5c11AppKey\u53c2\u6570";case 29:return"\u975e\u6cd5\u7684AppKe\u53c2\u6570";case 30:return"\u7f3a\u5c11\u65f6\u95f4\u6233\u53c2\u6570";case 31:return"\u975e\u6cd5\u7684\u65f6\u95f4\u6233\u53c2\u6570";case 32:return"\u7f3a\u5c11\u7248\u672c\u53c2\u6570";case 33:return"\u975e\u6cd5\u7684\u7248\u672c\u53c2\u6570";case 34:return"\u4e0d\u652f\u6301\u7684\u7248\u672c\u53f7";
case 40:return"\u7f3a\u5c11\u5fc5\u9009\u53c2\u6570";case 41:return"\u975e\u6cd5\u7684\u53c2\u6570";case 42:return"\u8bf7\u6c42\u88ab\u7981\u6b62";case 43:return"\u53c2\u6570\u9519\u8bef"}return b};function WindSender(a,b){this.url=a;this.load=function(c,d,e,f){$.ajax({url:this.url,type:c,data:d,dataType:"json",beforeSend:function(g){g.setRequestHeader("WindType","AJAX")},error:function(){b||alert("\u7f51\u7edc\u9519\u8bef!\u8bf7\u91cd\u8bd5");f&&typeof f=="function"&&f()},success:function(g){g=new WindResponse(g);if(!g.isSuccess()&&(g.errorCode==27||g.errorCode==100))document.location.href="/router/site/redirect";else e(g)}})}};var channels={brand_lib:{name:"\u54c1\u724c\u5e93",value:"brand_lib",pic:"/assets/min/images/channel/brand_lib.jpg",bigPic:"/assets/min/images/channel/brand_lib_big.jpg",height:4120,clickUrl:"http://www.taobao.com/go/chn/taoke/mingdian.php?pid=mm_10011550_0_0&eventid=102305"},shop_street:{name:"\u5e97\u94fa\u8857",value:"huangguan",pic:"http://img.alimama.cn/cms/images/1287996980716.gif",bigPic:"http://img.alimama.cn/cms/images/1287997005529.gif",height:1290,clickUrl:"http://dianpu.tao123.com?pid=mm_10011550_0_0&eventid=102167"},
jipiao:{name:"\u673a\u7968\u9891\u9053",value:"jipiao",pic:"http://img.alimama.cn/cms/images/1283924634215.jpg",bigPic:"http://img.alimama.cn/cms/images/1283924617885.jpg",height:1570,clickUrl:"http://www.taobao.com/go/chn/tbk_channel/trip.php?pid=mm_10011550_0_0&eventid=101829"},channelcode:{name:"\u7efc\u5408\u9891\u9053",value:"channelcode",pic:"http://img.alimama.cn/cms/images/1286869492993.jpg",bigPic:"http://img.alimama.cn/cms/images/1286869476677.jpg",height:1890,clickUrl:"http://www.taobao.com/go/chn/tbk_channel/channelcode.php?pid=mm_10011550_0_0&eventid=101329"},
channelmall:{name:"\u5546\u57ce\u9891\u9053",value:"channelmall",pic:"http://img.alimama.cn/cms/images/1286515480276.jpg",bigPic:"http://img.alimama.cn/cms/images/1286515433553.jpg",height:2593,clickUrl:"http://www.tmall.com/go/chn/tbk_channel/tmall_new.php?pid=mm_10011550_0_0&eventid=101334"},onsale:{name:"\u7279\u5356\u9891\u9053",value:"onsale",pic:"http://img.alimama.cn/cms/images/1283505145077.jpg",bigPic:"http://img.alimama.cn/cms/images/1283505042320.jpg",height:2240,clickUrl:"http://www.taobao.com/go/chn/tbk_channel/channelcode.php?pid=mm_10011550_0_0&eventid=101329"},
lady:{name:"\u5973\u4eba\u9891\u9053",value:"lady",pic:"http://img.alimama.cn/cms/images/1274591445606.png",bigPic:"http://img.alimama.cn/cms/images/1274587581948.jpg",height:2960,clickUrl:"http://www.taobao.com/go/chn/tbk_channel/lady.php?pid=mm_10011550_0_0&eventid=101345"},man:{name:"\u7537\u4eba\u9891\u9053",value:"man",pic:"http://img.alimama.cn/cms/images/1274591489428.png",bigPic:"http://img.alimama.cn/cms/images/1274586523965.jpg",height:1920,clickUrl:"http://www.taobao.com/go/chn/tbk_channel/man.php?pid=mm_10011550_0_0&eventid=101330"},
beauty:{name:"\u7f8e\u5bb9\u9891\u9053",value:"beauty",pic:"http://img.alimama.cn/cms/images/1274591393756.png",bigPic:"http://img.alimama.cn/cms/images/1274586574475.jpg",height:2760,clickUrl:"http://www.taobao.com/go/chn/tbk_channel/beauty.php?pid=mm_10011550_0_0&eventid=101328"},jewelry:{name:"\u9970\u54c1\u978b\u5305",value:"jewelry",pic:"http://img.alimama.cn/cms/images/1274591478278.png",bigPic:"http://img.alimama.cn/cms/images/1274586536179.jpg",height:2620,clickUrl:"http://www.taobao.com/go/chn/tbk_channel/jewelry.php?pid=mm_10011550_0_0&eventid=101331"},
taobrandchannel:{name:"\u6dd8\u54c1\u724c",value:"taobrandchannel",pic:"http://img.alimama.cn/cms/images/1277794914356.jpg",bigPic:"http://img.alimama.cn/cms/images/1277794893044.jpg",height:3040,clickUrl:"http://www.taobao.com/go/chn/tbk_channel/huangguan.php?pid=mm_10011550_0_0&eventid=101858"},taiwan:{name:"\u53f0\u6e7e\u9986\u9891\u9053",value:"taiwan",pic:"http://img.alimama.cn/cms/images/1274591455855.png",bigPic:"http://img.alimama.cn/cms/images/1274586544922.jpg",height:2950,clickUrl:"http://taoke.alimama.com/tms/channel/taiwan.htm?pid=mm_10011550_0_0&eventid=101350"},
channelfy:{name:"\u6dd8\u5b9d\u98ce\u4e91\u699c",value:"channelfy",pic:"http://img.alimama.cn/cms/images/1277868564857.png",bigPic:"http://img.alimama.cn/cms/images/1277868503677.jpg",height:2700,clickUrl:"http://pindao.huoban.taobao.com/channel/channelfy.htm?pid=mm_10011550_0_0&eventid=101325"},digital:{name:"\u6570\u7801\u9891\u9053",value:"digital",pic:"http://img.alimama.cn/cms/images/1274591436134.png",bigPic:"http://img.alimama.cn/cms/images/1274586558196.jpg",height:3330,clickUrl:"http://www.taobao.com/go/chn/tbk_channel/digital.php?pid=mm_10011550_0_0&eventid=101332"},
baby:{name:"\u5c45\u5bb6\u73a9\u5177",value:"baby",pic:"http://img.alimama.cn/cms/images/1274591505097.png",bigPic:"http://img.alimama.cn/cms/images/1274586499786.jpg",height:2382,clickUrl:"http://www.taobao.com/go/chn/tbk_channel/child.php?pid=mm_10011550_0_0&eventid=102185"},mallhouse:{name:"\u5bb6\u88c5\u9891\u9053",value:"mallhouse",pic:"http://img.alimama.cn/cms/images/1276132646307.gif",bigPic:"http://img.alimama.cn/cms/images/1276132754545.jpg",height:1260,clickUrl:"http://www.taobao.com/go/chn/tbk_channel/baby.php?pid=mm_10011550_0_0&eventid=101326"},
huodong69:{name:"69\u5143\u673a\u7968",value:"huodong69",pic:"http://img.alimama.cn/cms/images/1284086806505.jpg",bigPic:"http://img.alimama.cn/cms/images/1284086793421.jpg",height:2870,clickUrl:"http://www.taobao.com/go/chn/tbk_channel/trip.php?pid=mm_10011550_0_0&eventid=101829"},channelmankill:{name:"\u79d2\u6740\u53ca\u6ee1\u7acb\u51cf\u5e7f\u544a\u6a21\u5757",value:"channelmankill",pic:"http://img01.taobaocdn.com/tps/i1/T1Gb8PXc0AXXXXXXXX-700-278.jpg",bigPic:"http://img04.taobaocdn.com/tps/i4/T1jsXPXhBzXXXXXXXX-97-93.jpg",
height:380,clickUrl:"http://www.taobao.com/go/chn/tbk_channel/miaoshakill.php?pid=mm_10011550_0_0&eventid=101985"},huangguan:{name:"\u6dd8\u5b9d\u7687\u51a0\u5e97\u94fa\u7cbe\u9009",value:"huangguan",pic:"http://img.alimama.cn/cms/images/1287996980716.gif",bigPic:"http://img.alimama.cn/cms/images/1287997005529.gif",height:1290,clickUrl:"http://www.taobao.com/go/chn/tbk_channel/huangguan.php?pid=mm_10011550_0_0&eventid=101858"},food1:{name:"\u98df\u54c1\u9891\u9053",value:"food1",pic:"http://img.alimama.cn/cms/images/1274591369018.png",
bigPic:"http://img.alimama.cn/cms/images/1274586591574.jpg",height:2030,clickUrl:"http://www.taobao.com/go/chn/tbk_channel/food.php?pid=mm_10011550_0_0&eventid=101865"},electric:{name:"\u7535\u5668\u57ce\u9891\u9053",value:"electric",pic:"http://img.alimama.cn/cms/images/1274591426271.png",bigPic:"http://img.alimama.cn/cms/images/1274586729133.jpg",height:1320,clickUrl:"http://s.click.taobao.com/t_9?p=mm_10011550_0_0&l=http%3A%2F%2F3c.tmall.com"}};var TaobaoConstants={URL:"/router/taobao",SECRET:"",API_KEY:"",APIKEY:"api_key",METHOD:"method",SESSION:"session",SIGN:"sign",TIMESTAMP:"timestamp",FORMAT:"format",VERSION:"v",ERROR_RSP:"error_response",ERROR_CODE:"code",ERROR_MSG:"msg",SUB_ERROR_CODE:"sub_code",SUB_ERROR_MSG:"sub_msg",RSP:"rsp",TOTALRESULTS:"totalResults"};var defaultPID="mm_13667242_0_0";if(!PID)var PID=defaultPID;
var placeHolders={itemsLinkView:{image:"itemsLinkView",name:"\u6587\u5b57\u94fe\u63a5",desc:"\u6587\u5b57\u94fe\u63a5",type:"group",html:'<div name="itemsLinkView" class="ui-designer-widget" metadata="{resizable : \'true\',data_type:\'groups\',align:\'center\'}"><div class="ui-designer-widget-header" align="left"><b class="widget-title" wname="itemsLinkView"></b><a class="ui-designer-widget-more" target="_blank">\u66f4\u591a</a></div><dl class="widget-itemslinkview-items"></dl></div>'},itemsThumbView:{image:"itemsThumbView",
name:"\u56fe\u5f62\u76f8\u518c",desc:"\u56fe\u5f62\u76f8\u518c",type:"group",html:'<div name="itemsThumbView" class="ui-designer-widget" metadata="{resizable : \'true\',data_type:\'groups\',align:\'center\'}"><div class="ui-designer-widget-header" align="left"><b class="widget-title" wname="itemsThumbView"></b><a class="ui-designer-widget-more" target="_blank">\u66f4\u591a</a></div><ul class="widget-itemsthumbview-items"></ul></div>'},itemsListView:{image:"itemsListView",name:"\u5546\u54c1\u5217\u8868",
desc:"\u5546\u54c1\u5217\u8868",minWidth:500,type:"group",html:'<div name="itemsListView" class="ui-designer-widget" metadata="{resizable : \'true\',data_type:\'groups\',handles:\'s\',minWidth:560}" minWidth="560"><div class="ui-designer-widget-header" align="left"><b class="widget-title" wname="itemsListView">\u5546\u54c1\u5217\u8868</b><a class="ui-designer-widget-more" target="_blank">\u66f4\u591a</a></div><ul class="widget-itemslistview-items"></ul></div>'},itemsScrollableView:{image:"itemsScrollableView",
name:"\u6a2a\u5411\u6eda\u52a8\u76f8\u518c",desc:"\u6a2a\u5411\u6eda\u52a8\u76f8\u518c",minWidth:470,type:"group",html:'<div name="itemsScrollableView" class="ui-designer-widget" metadata="{resizable : \'false\',data_type:\'groups\',minWidth:470,handles:\'s\',align:\'center\'}" minWidth="470"><div class="ui-designer-widget-header" align="left"><b class="widget-title" wname="itemsScrollableView"></b><a class="ui-designer-widget-more" target="_blank">\u66f4\u591a</a><div class="navi"></div></div><div class="widget-itemsscrollableview-items scrollable"><div class="items"></div></div></div>'},
flashView:{image:"flashView",name:"\u963f\u91cc\u5988\u5988\u5e7f\u544a\u724c",desc:"\u963f\u91cc\u5988\u5988\u5e7f\u544a\u724c",type:"alimama",html:'<div name="flashView" class="ui-designer-widget" metadata="{resizable : \'false\',data_type:\'none\',align:\'center\',handles:\'s\'}"><div class="ui-designer-widget-header" align="left"><b class="widget-title" wname="flashView"></b></div><div class="widget-flashview"></div></div>'},searchBox:{image:"searchBox",name:"\u641c\u7d22\u6846",desc:"\u641c\u7d22\u6846",
minWidth:560,type:"alimama",html:'<div name="searchBox" class="ui-designer-widget" metadata="{resizable : \'false\',data_type:\'none\',align:\'center\',handles:\'s\',cat:\'0\',line:1}"><div class="ui-designer-widget-header" align="left"><b class="widget-title" wname="searchBox"></b></div><div class="widget-searchbox"><div class="preview_content" align="center"><ul class="p_t"><li class="t_search"><form method="get" action="/search" target="_blank"><label for="q"><input type="text" class="searchBox" name="q"><input type="hidden" name="cid" value=""><input type="button" value="" class="searchBtn" onclick="$(this).parents(\'form:first\').submit();"></label></form></li></ul></div></div></div>'},
channelView:{image:"channelView",name:"\u9891\u9053\u63a8\u5e7f",desc:"\u9891\u9053\u63a8\u5e7f",minWidth:900,type:"alimama",html:'<div name="channelView" class="ui-designer-widget" metadata="{resizable : \'false\',minWidth:\'900\',data_type:\'none\',handles:\'s\'}" minWidth="900"><div class="ui-designer-widget-header" align="left"><b wname="channelView" class="widget-title"></b></div><div class="widget-channelview"></div></div>'},netLinkView:{image:"netLinkView",name:"\u53cb\u60c5\u94fe\u63a5",desc:"\u53cb\u60c5\u94fe\u63a5",
type:"other",html:'<div name="netLinkView" class="ui-designer-widget" metadata="{resizable : \'true\',data_type:\'none\'}"><div class="ui-designer-widget-header" align="left"><b wname="netLinkView" class="widget-title"></b></div><ul class="widget-netlinkview"></ul></div>'},richEditor:{image:"richEditor",name:"html\u9ad8\u7ea7\u7f16\u8f91\u5668",desc:"html\u9ad8\u7ea7\u7f16\u8f91\u5668",type:"other",html:'<div name="richEditor" class="ui-designer-widget" metadata="{data_type:\'none\'}"><div class="ui-designer-widget-header" align="left"><b class="widget-title" wname="richEditor"></b></div><div class="widget-richeditor"></div></div>'},
widgetCustomer:{image:"widgetCustomer",name:"\u81ea\u5b9a\u4e49\u7ec4\u4ef6",desc:"\u81ea\u5b9a\u4e49\u7ec4\u4ef6",type:"custome",html:'<div name="widgetCustomer" class="ui-designer-widget" metadata="{resizable : \'false\',data_type:\'custome\',align:\'center\'}"><div class="ui-designer-widget-header" align="left"><b class="widget-title" wname="widgetCustomer"></b><a class="ui-designer-widget-more" target="_blank">\u66f4\u591a</a></div><div class="widget-customer" align="center"></div></div>'},huabaoView:{image:"huabaoView",
name:"\u5bfc\u8d2d\u753b\u62a5\u7ec4\u4ef6",desc:"\u5bfc\u8d2d\u753b\u62a5\u7ec4\u4ef6",type:"custome",html:'<div name="huabaoView" class="ui-designer-widget" metadata="{resizable : \'true\',data_type:\'none\'}"><div class="ui-designer-widget-header" align="left"><b wname="huabaoView" class="widget-title"></b></div><div class="widget-huabaoview"></div></div>'},chongzhiView:{image:"chongzhiView",name:"\u865a\u62df\u5145\u503c\u6846",desc:"\u865a\u62df\u5145\u503c\u6846",type:"other",html:'<div name="chongzhiView" class="ui-designer-widget" metadata="{resizable : \'true\',data_type:\'none\',align:\'center\'}"><div class="ui-designer-widget-header" align="left"><b wname="chongzhiView" class="widget-title"></b></div><div class="widget-chongzhiview"></div></div>'}};
function CssClass(a){this.name=a;this.toSource=function(){var b=a+"{";for(var c in this)if(c&&"name"!=c&&this[c]&&this[c].length>0)b+=c+":"+this[c]+";";b+="}";return b};this.copy=function(){var b=new CssClass(this.name);for(var c in this)b[c]=this[c];return b}}var t_pink_body=new CssClass(".ui-designer-body"),t_pink_header=new CssClass(".ui-designer-widget-header");t_pink_header["background-image"]="url(/assets/min/images/wh/cutepink.jpg)";t_pink_header.color="rgb(255, 255, 255)";
var t_pink_widget=new CssClass(".ui-designer-widget");t_pink_widget["background-color"]="rgb(255, 242, 255)";var t_pink_title=new CssClass(".title,.title a");t_pink_title.color="#36C";var t_pink_price=new CssClass(".price");t_pink_price.color="#FF6600";var t_pink_h2_span=new CssClass(".custome-header-h2 span");t_pink_h2_span["background-color"]="pink";var t_green_body=new CssClass(".ui-designer-body"),t_green_header=new CssClass(".ui-designer-widget-header");t_green_header["background-image"]="url(/assets/min/images/wh/green.jpg)";
t_green_header.color="#ffffff";var t_green_widget=new CssClass(".ui-designer-widget");t_green_widget["background-color"]="rgb(255, 242, 255)";var t_green_title=new CssClass(".title,.title a");t_green_title.color="#3366cc";var t_green_price=new CssClass(".price");t_green_price.color="#ff6600";var t_green_h2_span=new CssClass(".custome-header-h2 span");t_green_h2_span["background-color"]="green";var t_silver_body=new CssClass(".ui-designer-body"),t_silver_header=new CssClass(".ui-designer-widget-header");
t_silver_header["background-image"]="url(/assets/min/images/wh/silver.jpg)";t_silver_header.color="rgb(102, 102, 102)";var t_silver_widget=new CssClass(".ui-designer-widget");t_silver_widget["background-color"]="rgb(255, 242, 255)";var t_silver_title=new CssClass(".title,.title a");t_silver_title.color="rgb(51, 102, 204)";var t_silver_price=new CssClass(".price");t_silver_price.color="rgb(255, 102, 0)";var t_silver_more=new CssClass(".ui-designer-widget-more");t_silver_more.color="#666666";
var t_silver_h2_span=new CssClass(".custome-header-h2 span");t_silver_h2_span["background-color"]="silver";var t_black_body=new CssClass(".ui-designer-body"),t_black_header=new CssClass(".ui-designer-widget-header");t_black_header["background-image"]="url(/assets/min/images/wh/black.jpg)";t_black_header.color="#ffffff";var t_black_widget=new CssClass(".ui-designer-widget");t_black_widget["background-color"]="rgb(255, 242, 255)";var t_black_title=new CssClass(".title,.title a");
t_black_title.color="#3366cc";var t_black_price=new CssClass(".price");t_black_price.color="#ff6600";var t_black_h2_span=new CssClass(".custome-header-h2 span");t_black_h2_span["background-color"]="black";var t_blue_body=new CssClass(".ui-designer-body"),t_blue_header=new CssClass(".ui-designer-widget-header");t_blue_header["background-image"]="url(/assets/min/images/wh/blue.jpg)";t_blue_header.color="#ffffff";var t_blue_widget=new CssClass(".ui-designer-widget");
t_blue_widget["background-color"]="rgb(255, 242, 255)";var t_blue_title=new CssClass(".title,.title a");t_blue_title.color="#3366cc";var t_blue_price=new CssClass(".price");t_blue_price.color="#ff6600";var t_blue_h2_span=new CssClass(".custome-header-h2 span");t_blue_h2_span["background-color"]="blue";var t_purple_body=new CssClass(".ui-designer-body"),t_purple_header=new CssClass(".ui-designer-widget-header");t_purple_header["background-image"]="url(/assets/min/images/wh/purple.jpg)";
t_purple_header.color="#ffffff";var t_purple_widget=new CssClass(".ui-designer-widget");t_purple_widget["background-color"]="rgb(255, 242, 255)";var t_purple_title=new CssClass(".title,.title a");t_purple_title.color="#3366cc";var t_purple_price=new CssClass(".price");t_purple_price.color="#ff6600";var t_purple_h2_span=new CssClass(".custome-header-h2 span");t_purple_h2_span["background-color"]="purple";var t_orange_body=new CssClass(".ui-designer-body"),t_orange_header=new CssClass(".ui-designer-widget-header");
t_orange_header["background-image"]="url(/assets/min/images/wh/orange.jpg)";t_orange_header.color="#ffffff";var t_orange_widget=new CssClass(".ui-designer-widget");t_orange_widget["background-color"]="rgb(255, 242, 255)";var t_orange_title=new CssClass(".title,.title a");t_orange_title.color="#3366cc";var t_orange_price=new CssClass(".price");t_orange_price.color="#ff6600";var t_orange_h2_span=new CssClass(".custome-header-h2 span");t_orange_h2_span["background-color"]="orange";
var t_brown_body=new CssClass(".ui-designer-body"),t_brown_header=new CssClass(".ui-designer-widget-header");t_brown_header["background-image"]="url(/assets/min/images/wh/brown.png)";t_brown_header.color="#ffffff";var t_brown_widget=new CssClass(".ui-designer-widget");t_brown_widget["background-color"]="rgb(255, 242, 255)";var t_brown_title=new CssClass(".title,.title a");t_brown_title.color="#3366cc";var t_brown_price=new CssClass(".price");t_brown_price.color="#ff6600";var t_brown_h2_span=new CssClass(".custome-header-h2 span");
t_brown_h2_span["background-color"]="brown";var t_yellow_body=new CssClass(".ui-designer-body"),t_yellow_header=new CssClass(".ui-designer-widget-header");t_yellow_header["background-image"]="url(/assets/min/images/wh/yellow.png)";t_yellow_header.color="#ffffff";var t_yellow_widget=new CssClass(".ui-designer-widget");t_yellow_widget["background-color"]="rgb(255, 242, 255)";var t_yellow_title=new CssClass(".title,.title a");t_yellow_title.color="#3366cc";var t_yellow_price=new CssClass(".price");
t_yellow_price.color="#ff6600";var t_yellow_h2_span=new CssClass(".custome-header-h2 span");t_yellow_h2_span["background-color"]="yellow";var t_red_body=new CssClass(".ui-designer-body"),t_red_header=new CssClass(".ui-designer-widget-header");t_red_header["background-image"]="url(/assets/min/images/wh/red.jpg)";t_red_header.color="#ffffff";var t_red_widget=new CssClass(".ui-designer-widget");t_red_widget["background-color"]="rgb(255, 242, 255)";var t_red_title=new CssClass(".title,.title a");
t_red_title.color="#3366cc";var t_red_price=new CssClass(".price");t_red_price.color="#ff6600";var t_red_h2_span=new CssClass(".custome-header-h2 span");t_red_h2_span["background-color"]="red";
var sysThemes={"t-pink":{".ui-designer-body":t_pink_body,".ui-designer-widget-header":t_pink_header,".ui-designer-widget":t_pink_widget,".title,.title a":t_pink_title,".price":t_pink_price,".custome-header-h2 span":t_pink_h2_span},"t-green":{".ui-designer-body":t_green_body,".ui-designer-widget-header":t_green_header,".ui-designer-widget":t_green_widget,".title,.title a":t_green_title,".price":t_green_price,".custome-header-h2 span":t_green_h2_span},"t-silver":{".ui-designer-body":t_silver_body,".ui-designer-widget-header":t_silver_header,
".ui-designer-widget":t_silver_widget,".title,.title a":t_silver_title,".price":t_silver_price,"..ui-designer-widget-more":t_silver_more,".custome-header-h2 span":t_silver_h2_span},"t-black":{".ui-designer-body":t_black_body,".ui-designer-widget-header":t_black_header,".ui-designer-widget":t_black_widget,".title,.title a":t_black_title,".price":t_black_price,".custome-header-h2 span":t_black_h2_span},"t-blue":{".ui-designer-body":t_blue_body,".ui-designer-widget-header":t_blue_header,".ui-designer-widget":t_blue_widget,
".title,.title a":t_blue_title,".price":t_blue_price,".custome-header-h2 span":t_blue_h2_span},"t-purple":{".ui-designer-body":t_purple_body,".ui-designer-widget-header":t_purple_header,".ui-designer-widget":t_purple_widget,".title,.title a":t_purple_title,".price":t_purple_price,".custome-header-h2 span":t_purple_h2_span},"t-orange":{".ui-designer-body":t_orange_body,".ui-designer-widget-header":t_orange_header,".ui-designer-widget":t_orange_widget,".title,.title a":t_orange_title,".price":t_orange_price,
".custome-header-h2 span":t_orange_h2_span},"t-brown":{".ui-designer-body":t_brown_body,".ui-designer-widget-header":t_brown_header,".ui-designer-widget":t_brown_widget,".title,.title a":t_brown_title,".price":t_brown_price,".custome-header-h2 span":t_brown_h2_span},"t-yellow":{".ui-designer-body":t_yellow_body,".ui-designer-widget-header":t_yellow_header,".ui-designer-widget":t_yellow_widget,".title,.title a":t_yellow_title,".price":t_yellow_price,".custome-header-h2 span":t_yellow_h2_span},"t-red":{".ui-designer-body":t_red_body,
".ui-designer-widget-header":t_red_header,".ui-designer-widget":t_red_widget,".title,.title a":t_red_title,".price":t_red_price,".custome-header-h2 span":t_red_h2_span}},t_yinse_a=new CssClass(".ui-designer-header-tabs a");t_yinse_a["background-image"]="url(/assets/min/images/nav/h_yinse.png)";t_yinse_a["background-position"]="100% -25px";var t_yinse_a_h2=new CssClass(".ui-designer-header-tabs a h2");t_yinse_a_h2["background-image"]="url(/assets/min/images/nav/h_yinse.png)";
t_yinse_a_h2["background-position"]="0px 0px";t_yinse_a_h2.color="#5E523B";var t_yinse_a_hover=new CssClass(".ui-designer-header-tabs a:hover");t_yinse_a_hover["background-image"]="url(/assets/min/images/nav/h_yinse.png)";t_yinse_a_hover["background-position"]="100% -75px";var t_yinse_a_hover_h2=new CssClass(".ui-designer-header-tabs a:hover h2");t_yinse_a_hover_h2["background-image"]="url(/assets/min/images/nav/h_yinse.png)";t_yinse_a_hover_h2["background-position"]="0px -50px";var t_pink_a=new CssClass(".ui-designer-header-tabs a");
t_pink_a["background-image"]="url(/assets/min/images/nav/h_pink.gif)";t_pink_a["background-position"]="100% -25px";var t_pink_a_h2=new CssClass(".ui-designer-header-tabs a h2");t_pink_a_h2["background-image"]="url(/assets/min/images/nav/h_pink.gif)";t_pink_a_h2["background-position"]="0px 0px";var t_pink_a_hover=new CssClass(".ui-designer-header-tabs a:hover");t_pink_a_hover["background-image"]="url(/assets/min/images/nav/h_pink.gif)";t_pink_a_hover["background-position"]="100% -75px";
var t_pink_a_hover_h2=new CssClass(".ui-designer-header-tabs a:hover h2");t_pink_a_hover_h2["background-image"]="url(/assets/min/images/nav/h_pink.gif)";t_pink_a_hover_h2["background-position"]="0px -50px";var t_green_a=new CssClass(".ui-designer-header-tabs a");t_green_a["background-image"]="url(/assets/min/images/nav/h_green.png)";t_green_a["background-position"]="100% -25px";var t_green_a_h2=new CssClass(".ui-designer-header-tabs a h2");t_green_a_h2["background-image"]="url(/assets/min/images/nav/h_green.png)";
t_green_a_h2["background-position"]="0px 0px";var t_green_a_hover=new CssClass(".ui-designer-header-tabs a:hover");t_green_a_hover["background-image"]="url(/assets/min/images/nav/h_green.png)";t_green_a_hover["background-position"]="100% -75px";var t_green_a_hover_h2=new CssClass(".ui-designer-header-tabs a:hover h2");t_green_a_hover_h2["background-image"]="url(/assets/min/images/nav/h_green.png)";t_green_a_hover_h2["background-position"]="0px -50px";var t_black_a=new CssClass(".ui-designer-header-tabs a");
t_black_a["background-image"]="url(/assets/min/images/nav/h_black.png)";t_black_a["background-position"]="100% -25px";var t_black_a_h2=new CssClass(".ui-designer-header-tabs a h2");t_black_a_h2["background-image"]="url(/assets/min/images/nav/h_black.png)";t_black_a_h2["background-position"]="0px 0px";var t_black_a_hover=new CssClass(".ui-designer-header-tabs a:hover");t_black_a_hover["background-image"]="url(/assets/min/images/nav/h_black.png)";t_black_a_hover["background-position"]="100% -75px";
var t_black_a_hover_h2=new CssClass(".ui-designer-header-tabs a:hover h2");t_black_a_hover_h2["background-image"]="url(/assets/min/images/nav/h_black.png)";t_black_a_hover_h2["background-position"]="0px -50px";var t_blue_a=new CssClass(".ui-designer-header-tabs a");t_blue_a["background-image"]="url(/assets/min/images/nav/h_blue.png)";t_blue_a["background-position"]="100% -25px";var t_blue_a_h2=new CssClass(".ui-designer-header-tabs a h2");t_blue_a_h2["background-image"]="url(/assets/min/images/nav/h_blue.png)";
t_blue_a_h2["background-position"]="0px 0px";var t_blue_a_hover=new CssClass(".ui-designer-header-tabs a:hover");t_blue_a_hover["background-image"]="url(/assets/min/images/nav/h_blue.png)";t_blue_a_hover["background-position"]="100% -75px";var t_blue_a_hover_h2=new CssClass(".ui-designer-header-tabs a:hover h2");t_blue_a_hover_h2["background-image"]="url(/assets/min/images/nav/h_blue.png)";t_blue_a_hover_h2["background-position"]="0px -50px";var t_purple_a=new CssClass(".ui-designer-header-tabs a");
t_purple_a["background-image"]="url(/assets/min/images/nav/h_purple.png)";t_purple_a["background-position"]="100% -25px";var t_purple_a_h2=new CssClass(".ui-designer-header-tabs a h2");t_purple_a_h2["background-image"]="url(/assets/min/images/nav/h_purple.png)";t_purple_a_h2["background-position"]="0px 0px";var t_purple_a_hover=new CssClass(".ui-designer-header-tabs a:hover");t_purple_a_hover["background-image"]="url(/assets/min/images/nav/h_purple.png)";t_purple_a_hover["background-position"]="100% -75px";
var t_purple_a_hover_h2=new CssClass(".ui-designer-header-tabs a:hover h2");t_purple_a_hover_h2["background-image"]="url(/assets/min/images/nav/h_purple.png)";t_purple_a_hover_h2["background-position"]="0px -50px";var t_orange_a=new CssClass(".ui-designer-header-tabs a");t_orange_a["background-image"]="url(/assets/min/images/nav/h_orange.png)";t_orange_a["background-position"]="100% -25px";var t_orange_a_h2=new CssClass(".ui-designer-header-tabs a h2");t_orange_a_h2["background-image"]="url(/assets/min/images/nav/h_orange.png)";
t_orange_a_h2["background-position"]="0px 0px";var t_orange_a_hover=new CssClass(".ui-designer-header-tabs a:hover");t_orange_a_hover["background-image"]="url(/assets/min/images/nav/h_orange.png)";t_orange_a_hover["background-position"]="100% -75px";var t_orange_a_hover_h2=new CssClass(".ui-designer-header-tabs a:hover h2");t_orange_a_hover_h2["background-image"]="url(/assets/min/images/nav/h_orange.png)";t_orange_a_hover_h2["background-position"]="0px -50px";var t_brown_a=new CssClass(".ui-designer-header-tabs a");
t_brown_a["background-image"]="url(/assets/min/images/nav/h_brown.png)";t_brown_a["background-position"]="100% -25px";var t_brown_a_h2=new CssClass(".ui-designer-header-tabs a h2");t_brown_a_h2["background-image"]="url(/assets/min/images/nav/h_brown.png)";t_brown_a_h2["background-position"]="0px 0px";var t_brown_a_hover=new CssClass(".ui-designer-header-tabs a:hover");t_brown_a_hover["background-image"]="url(/assets/min/images/nav/h_brown.png)";t_brown_a_hover["background-position"]="100% -75px";
var t_brown_a_hover_h2=new CssClass(".ui-designer-header-tabs a:hover h2");t_brown_a_hover_h2["background-image"]="url(/assets/min/images/nav/h_brown.png)";t_brown_a_hover_h2["background-position"]="0px -50px";var t_yellow_a=new CssClass(".ui-designer-header-tabs a");t_yellow_a["background-image"]="url(/assets/min/images/nav/h_yellow.png)";t_yellow_a["background-position"]="100% -25px";var t_yellow_a_h2=new CssClass(".ui-designer-header-tabs a h2");t_yellow_a_h2["background-image"]="url(/assets/min/images/nav/h_yellow.png)";
t_yellow_a_h2["background-position"]="0px 0px";var t_yellow_a_hover=new CssClass(".ui-designer-header-tabs a:hover");t_yellow_a_hover["background-image"]="url(/assets/min/images/nav/h_yellow.png)";t_yellow_a_hover["background-position"]="100% -75px";var t_yellow_a_hover_h2=new CssClass(".ui-designer-header-tabs a:hover h2");t_yellow_a_hover_h2["background-image"]="url(/assets/min/images/nav/h_yellow.png)";t_yellow_a_hover_h2["background-position"]="0px -50px";var t_red_a=new CssClass(".ui-designer-header-tabs a");
t_red_a["background-image"]="url(/assets/min/images/nav/h_red.png)";t_red_a["background-position"]="100% -25px";var t_red_a_h2=new CssClass(".ui-designer-header-tabs a h2");t_red_a_h2["background-image"]="url(/assets/min/images/nav/h_red.png)";t_red_a_h2["background-position"]="0px 0px";var t_red_a_hover=new CssClass(".ui-designer-header-tabs a:hover");t_red_a_hover["background-image"]="url(/assets/min/images/nav/h_red.png)";t_red_a_hover["background-position"]="100% -75px";var t_red_a_hover_h2=new CssClass(".ui-designer-header-tabs a:hover h2");
t_red_a_hover_h2["background-image"]="url(/assets/min/images/nav/h_red.png)";t_red_a_hover_h2["background-position"]="0px -50px";
var navThemes={t_yinse:{".ui-designer-header-tabs a":t_yinse_a,".ui-designer-header-tabs a h2":t_yinse_a_h2,".ui-designer-header-tabs a:hover":t_yinse_a_hover,".ui-designer-header-tabs a:hover h2":t_yinse_a_hover_h2},t_pink:{".ui-designer-header-tabs a":t_pink_a,".ui-designer-header-tabs a h2":t_pink_a_h2,".ui-designer-header-tabs a:hover":t_pink_a_hover,".ui-designer-header-tabs a:hover h2":t_pink_a_hover_h2},t_green:{".ui-designer-header-tabs a":t_green_a,".ui-designer-header-tabs a h2":t_green_a_h2,
".ui-designer-header-tabs a:hover":t_green_a_hover,".ui-designer-header-tabs a:hover h2":t_green_a_hover_h2},t_black:{".ui-designer-header-tabs a":t_black_a,".ui-designer-header-tabs a h2":t_black_a_h2,".ui-designer-header-tabs a:hover":t_black_a_hover,".ui-designer-header-tabs a:hover h2":t_black_a_hover_h2},t_blue:{".ui-designer-header-tabs a":t_blue_a,".ui-designer-header-tabs a h2":t_blue_a_h2,".ui-designer-header-tabs a:hover":t_blue_a_hover,".ui-designer-header-tabs a:hover h2":t_blue_a_hover_h2},
t_purple:{".ui-designer-header-tabs a":t_purple_a,".ui-designer-header-tabs a h2":t_purple_a_h2,".ui-designer-header-tabs a:hover":t_purple_a_hover,".ui-designer-header-tabs a:hover h2":t_purple_a_hover_h2},t_orange:{".ui-designer-header-tabs a":t_orange_a,".ui-designer-header-tabs a h2":t_orange_a_h2,".ui-designer-header-tabs a:hover":t_orange_a_hover,".ui-designer-header-tabs a:hover h2":t_orange_a_hover_h2},t_brown:{".ui-designer-header-tabs a":t_brown_a,".ui-designer-header-tabs a h2":t_brown_a_h2,
".ui-designer-header-tabs a:hover":t_brown_a_hover,".ui-designer-header-tabs a:hover h2":t_brown_a_hover_h2},t_yellow:{".ui-designer-header-tabs a":t_yellow_a,".ui-designer-header-tabs a h2":t_yellow_a_h2,".ui-designer-header-tabs a:hover":t_yellow_a_hover,".ui-designer-header-tabs a:hover h2":t_yellow_a_hover_h2},t_red:{".ui-designer-header-tabs a":t_red_a,".ui-designer-header-tabs a h2":t_red_a_h2,".ui-designer-header-tabs a:hover":t_red_a_hover,".ui-designer-header-tabs a:hover h2":t_red_a_hover_h2}};(function(a){a.widget("ui.analytics",{options:{},_init:function(){var b=this;o=b.options;var c=b.element,d=new WindSender("/router/member/designer/analytics");a("#analytics_update").button().click(function(){var e=a("input[type=radio][checked]",c);if(e.length==0)alert("\u60a8\u5c1a\u672a\u9009\u62e9\u9ed8\u8ba4\u7684\u7ad9\u70b9\u7edf\u8ba1");else if(a("#"+e.val()).val()=="")alert("\u5f53\u524d\u9ed8\u8ba4\u7684\u7ad9\u70b9\u7edf\u8ba1\u6807\u8bc6\u4e0d\u80fd\u4e3a\u7a7a");else{var f=a("#designer").designer("option",
"sid");d.load("POST",{sid:f,type:e.val(),gid:a("#analytics_google").val(),lid:a("#analytics_linezing").val(),laid:a("#analytics_51la").val()},function(g){if(g.isSuccess()){alert("\u7ad9\u70b9\u7edf\u8ba1\u4fe1\u606f\u66f4\u65b0\u6210\u529f");a("#ui-designer-topbar").tabs({selected:-1})}else alert(g.msg)})}});a("#analytics_cancel").button().click(function(){a("#ui-designer-topbar").tabs({selected:-1})})}})})(jQuery);(function(a){a.widget("ui.designerContainer",{options:{},toSource:function(b){var c='<div class="ui-designer-container '+this.element.attr("class").split(" ")[1]+'" style="margin-right:'+this.element.css("margin-right")+'">';this.element.find(".ui-designer-widget").each(function(){var d=a(this).attr("name"),e=a(this)[d]("toSource",b);c+=e});c+="</div>";return c},containerOver:function(){},containerOut:function(){},_create:function(){},_init:function(){var b=this,c=this.element;a("#ui-designer-size");
c.css("border-style","solid");c.width(c.width()-2);c.bind("movedown",function(e){alert(1);e.stopPropagation()});a.browser.msie&&a.browser.version=="6.0"||c.sortable({iframeFix:true,revert:true,items:".J_TBox",handle:".ui-designer-widget-handle",connectWith:[".ui-designer-container"],start:function(){isWidgetHandle=false},receive:function(e,f){e=f.item;if(f.item.hasClass("ui-draggable")){e=f.item.attr("wname");e=a(placeHolders[e].html)}if("widgetCustomer"==e.attr("name")&&f.sender!=null)if(f.sender.hasClass("ui-designer-container")){alert("\u8be5\u7ec4\u4ef6\u4e0d\u652f\u6301\u591a\u4e2a\u5bb9\u5668\u95f4\u62d6\u62fd");
f.sender.sortable("cancel");return}if(e=b._getMinWidth(e)){e=parseInt(e);if(e>a(this).width()&&f.sender!=null)if(f.sender.hasClass("ui-designer-container")){alert("\u8be5\u7ec4\u4ef6\u65e0\u6cd5\u653e\u5165\u5f53\u524d\u5bb9\u5668");f.sender.sortable("cancel")}}},stop:function(){isWidgetHandle=true},over:function(){},start:function(){},update:function(e,f){e=a(this);if(f.item.hasClass("ui-draggable")){e=f.item.attr("wname");var g=a(placeHolders[e].html);f.item.replaceWith(g);var h=b._getMinWidth(g);
if(h){h=parseInt(h);if(h>a(this).width()){alert("\u8be5\u7ec4\u4ef6\u65e0\u6cd5\u653e\u5165\u5f53\u524d\u5bb9\u5668");g.remove();return}}e=g.attr("name");if("widgetCustomer"==e)if(b.options.playout!=f.item.attr("layout")){alert("\u8be5\u81ea\u5b9a\u4e49\u7ec4\u4ef6\u4e0e\u5f53\u524d\u5bb9\u5668\u4e0d\u5339\u914d");g.remove();return}a(".widget-title",g).css("color","").text("\u53cc\u51fb\u7f16\u8f91\u6807\u9898");if("widgetCustomer"==e){g[e]({playout:b.options.playout,wid:f.item.attr("wid")});b.selectedWidget=
g;g[e]("refresh","init")}else{g[e]({playout:b.options.playout});b.selectedWidget=g;g[e]("refresh","init");g[e]("widgetSet")}}else if(f.sender!=e)if(!(f.sender==null&&!f.item.hasClass("ui-draggable"))){a(".ui-designer-widget-helper",f.item).remove();e=f.item.attr("name");f.item[e]({playout:b.options.playout});b.selectedWidget=f.item;f.item[e]("refresh","init")}}}).disableSelection();b.options.playout=b._convertLayout(c.attr("class").split(" ")[1]);var d=a(".ui-designer-widget",c);if(d.length==0)isDragWidget||
c.prepend(addWidgetA());else d.each(function(){var e=a(this).attr("name");a(this)[e]({playout:b.options.playout})})},_convertLayout:function(b){switch(b){case "middle-1":return"0";case "right-1-3":return"1";case "middle-1-3-1":return"2";case "left-1-1":return"3";case "right-1-1":return"3";case "left-1-1-1":return"4";case "middle-1-1-1":return"4";case "right-1-1-1":return"4";case "left-1-3":return"5";case "left-1-3-1":return"6";case "right-1-3-1":return"6";default:return"-1"}},_getMinWidth:function(b){var c=
b.attr("minWidth");if(!c){b=b.attr("metadata");b=eval("("+b+")");c=b.minWidth}return c},_placeHolder:function(){}})})(jQuery);var editing=null,editingTitle=null,editingUCBlog=null,editingAlimamaFlashBM=null,editingCats=null,editingSmartAdsFlash=null,editingFixedSmartAdsFlash=null,editingColor=null,editingNetLink=null,editingTopicEditor=null,editingShopsEditor=null,editingCustomeEditor=null,editingHuabaoEditor=null,editingGroupEditor=null,editingChannelEditor=null,editingSearchBoxEditor=null,editingWidget=null,cssClasses={},tempClasses={},isDesigner=true,isWidgetHandle=true,DEBUG=true,isF5=false,isCommissionView=false,isDragWidget=
true,isCustomeEditor=true,isRemoveAddA=true,HID=0,PICID=0,HOTTYPE=0,KEDITOR;
(function(a){a.widget("ui.designer",{options:{tid:"",stid:"",skin:"",update:false},selectedWidget:null,selectedContainer:null,clearDesigner:function(){a(".c-c").remove();a("body").data("customes",[]);a("#ui-designer-size").hide();a("#ui-designer-widget-handle").hide();a("#ui-designer-header-tools").hide();a("#tools").append(a("#ui-designer-size"));a("#tools").append(a("#ui-designer-widget-handle"));a("#tools").append(a("#ui-designer-header-tools"))},_create:function(){},_init:function(){var b=this,
c=b.element;try{b._createDesignerWidgetsTabs();b._initHotKeys();a("#ui-designer-widgetbar").bind("selectstart",function(){return false});a("#netLinkViewEditor").netLinkViewEditor();a("#huabaoEditorDialog").huabaoEditor();b._createWidgetTitleDialog();b._createEditor();b._createAlimamaBM();b._createColorPicker();b._createGroupDialog();b._createChannelDialog();b._createChangeCustomeWidget();b._createSearchBoxDialog();a("#themeRoller").themeRoller();a("#analytics").analytics();a("#ui-designer-widget-handle").widgetHandle();
var d=a("#ui-designer-header");if(d.length==0)d=a(".ui-designer-header");d.designerHeader();b._createMain();a("#footer").designerFooter();DesignerUtils.displaySize(a(".ui-resizable-handle"));a("#ui-designer-widgetbar").draggable({handle:"h3"});a.browser.msie&&a.browser.version=="6.0"||c.css("margin-top",50);a("#wrap").hover(function(){},function(){if(isWidgetHandle){var g=a("#ui-designer-widget-handle");g.hide();a("body").append(g)}})}catch(e){alert("\u52a0\u8f7d\u9519\u8bef:"+e+",\u8bf7\u5c1d\u8bd5\u5237\u65b0\u9875\u9762\u3002");
b="\u9519\u8bef:"+e;try{b=a.browser.msie?"version:"+a.browser.version+"<br/>name: "+e.name+"<br/>errorNumber: "+(e.number&65535)+"<br/>message: "+e.message:"name: "+e.name+"<br/>message: "+e.message+"<br/>lineNumber: "+e.lineNumber+"<br/>fileName: "+e.fileName+"<br/>stack: "+e.stack}catch(f){}(new WindSender("/router/member/designer/error")).load("POST",{content:b},function(){})}DesignerUtils.initWidgetBarPermission();a("#ui-designer-topbar").designerTopBar("enable");if(a.browser.msie&&(a.browser.version==
"6.0"||a.browser.version=="7.0"))a("#designerBrowserWarn").dialog("open")},_createChangeCustomeWidget:function(){a("#widget-customes-dialog").dialog({bgiframe:true,autoOpen:false,width:550,height:400,zIndex:1E5,resizable:false,modal:true,open:function(){if(editingCustomeEditor!=null){a(".checkedImg").remove();var b=editingCustomeEditor.widgetCustomer("option","wid"),c=editingCustomeEditor.parent();a("#widget-customes-dialog li .checkedImg").remove();var d=c.designerContainer("option","playout");a("#widget-customes-dialog li.widget").each(function(){var e=
a(this).attr("layout");if(e==d){b==a(this).attr("wid")&&a(this).prepend('<img class="checkedImg" src="/assets/images/link/checked.gif" style="position:absolute;right:0px;"/>');a(this).show()}else a(this).hide()})}},buttons:{"\u53d6\u6d88":function(){a(this).dialog("close")},"\u786e\u5b9a":function(){var b=a(".checkedImg",a(this)).parent();if(b.length==0)alert("\u8bf7\u9009\u62e9\u8981\u5207\u6362\u6210\u7684\u7ec4\u4ef6");else{b=b.attr("wid");var c=editingCustomeEditor.widgetCustomer("option","wid");
if(b==c)a(this).dialog("close");else if(editingCustomeEditor!=null){editingCustomeEditor.widgetCustomer("customeWidgetLoad",b);a(this).dialog("close")}else alert("\u672a\u6307\u5b9a\u8981\u6539\u53d8\u7684\u81ea\u5b9a\u4e49\u7ec4\u4ef6")}}}});a("#widget-customes-dialog li.widget").hover(function(){a(this).toggleClass("ui-selecting").siblings().removeClass("ui-selecting")},function(){a(this).removeClass("ui-selecting")}).click(function(){a(".checkedImg").remove();a(this).prepend('<img class="checkedImg" src="/assets/images/link/checked.gif" style="position:absolute;right:0px;"/>')})},
_createDesignerWidgetsTabs:function(){var b=this;a("#designer-widgets-dialog-tabs").tabs().addClass("ui-tabs-vertical ui-helper-clearfix");a("#designer-widgets-dialog-tabs li").removeClass("ui-corner-top").addClass("ui-corner-left");a("#designer-widgets-dialog").dialog({bgiframe:true,autoOpen:false,width:740,height:500,zIndex:1E5,resizable:false,modal:true,open:function(){if(editingWidget!=null){var c=null;if(editingWidget.hasClass("ui-designer-widget"))c=editingWidget.parent();else if(editingWidget.hasClass("ui-designer-container"))c=
editingWidget;a("#designer-widgets-dialog li .checkedImg").remove();var d=c.designerContainer("option","playout");a("#designer-widgets-dialog li.widget").each(function(){var e=a(this).attr("layout");if(e.indexOf(d)!=-1||e==d){a(this).removeClass("unactive");a(".unactive-img",a(this)).remove()}else a(this).attr("title","\u8bf7\u6dfb\u52a0\u5e03\u5c40\u5bb9\u5668"+DesignerUtils.getLayoutDesc(e)).addClass("unactive").prepend('<img class="unactive-img" src="/assets/images/link/disable.gif" style="position:absolute;right:0px;"/>')});
a("#designer-widgets-dialog li.unactive[title]").tooltip({position:"center right",offset:[0,15],delay:0})}},buttons:{"\u53d6\u6d88":function(){a(this).dialog("close")},"\u786e\u5b9a":function(){var c=a(".checkedImg",a(this)).parent();if(c.length==0)alert("\u8bf7\u9009\u62e9\u8981\u6dfb\u52a0\u7684\u7ec4\u4ef6");else if(editingWidget!=null){var d=placeHolders[c.attr("widget")];if(d=a(d.html)){if(editingWidget.hasClass("ui-designer-widget")){editingWidget.after(d);b._initWidget(d,editingWidget[editingWidget.attr("name")]("option",
"playout"),c.attr("wid"))}else if(editingWidget.hasClass("ui-designer-container")){isRemoveAddA=true;editingWidget.append(d);b._initWidget(d,editingWidget.designerContainer("option","playout"),c.attr("wid"));if(isRemoveAddA)a(".add-widget-a",editingWidget).remove();else return}a("#designer-widgets-dialog").dialog("close")}else alert("\u62b1\u6b49\uff01\u5f53\u524d\u7ec4\u4ef6\u4e0d\u53ef\u7528")}}}});a("#designer-widgets-dialog li.widget").hover(function(){a(this).hasClass("unactive")||a(this).toggleClass("ui-selecting").siblings().removeClass("ui-selecting")},
function(){a(this).removeClass("ui-selecting")}).click(function(){if(!a(this).hasClass("unactive")){a(".checkedImg").remove();a(this).prepend('<img class="checkedImg" src="/assets/images/link/checked.gif" style="position:absolute;right:0px;"/>')}})},toSource:function(b){this.clearDesigner();var c='<div id="main" class="clearfix">';a("#main .ui-designer-content").each(function(){c+=a(this).designerContent("toSource",b)});c+="</div>";var d="${header}",e='<div id="wrap">'+d+'<div class="ui-designer-space"></div>'+
c+"</div>";return e+'<div id="footer" align="center"></div>'},_initWidget:function(b,c,d){a(".widget-title",b).css("color","").text("\u53cc\u51fb\u7f16\u8f91\u6807\u9898");var e=b.attr("name");if("widgetCustomer"==e){b[e]({playout:c,wid:d});b[e]("refresh","init")}else{b[e]({playout:c});b[e]("refresh","init");b[e]("widgetSet")}},_initHotKeys:function(){},_createChannelDialog:function(){a("#widget-channels-dialog li").click(function(){a("#checkedImg").remove();a(this).toggleClass("selected");a("#widget-channels-dialog li").not(a(this)).removeClass("selected");
a(this).hasClass("selected")?a(this).prepend('<img id="checkedImg" src="/assets/images/link/checked.gif" style="position:absolute;"/>'):a("#checkedImg").remove()});a("#widget-channels-dialog").dialog({show:null,hide:null,bgiframe:true,width:600,autoOpen:false,zIndex:1E5,modal:true,resizable:true,buttons:{"\u53d6\u6d88":function(){a(this).dialog("close")},"\u786e\u5b9a":function(){if(editingChannelEditor!=null){editingChannelEditor.attr("name");var b=a("li.selected",a(this));if(b.length!=1){alert("\u8bf7\u9009\u62e9\u4e00\u4e2a\u9891\u9053");
return}if((b=channels[b.attr("channel")])&&b!=null)for(var c in b)c=="clickUrl"?editingChannelEditor.channelView("option",c,b[c].replace("mm_10011550_0_0",PID).replace("mm_13667242_0_0",PID)):editingChannelEditor.channelView("option",c,b[c]);WidgetUtils.channelView_init(editingChannelEditor.find(".widget-channelview"))}else alert("\u672a\u6307\u5b9a\u8981\u7f16\u8f91\u7684\u9891\u9053\u7ec4\u4ef6");a(this).dialog("close")}}})},_createSearchBoxDialog:function(){a("#widget-searchBox-dialog").dialog({show:null,
hide:null,bgiframe:true,width:400,autoOpen:false,zIndex:1E5,modal:true,resizable:true,open:function(){if(editingSearchBoxEditor!=null){var b=editingSearchBoxEditor.attr("name"),c=editingSearchBoxEditor[b]("option","cat");b=editingSearchBoxEditor[b]("option","line");c?a("#searchBoxCats").val(c):a("#searchBoxCats").val(0);b?a("#searchBoxLines").val(b):a("#searchBoxLines").val(0)}else alert("\u672a\u6307\u5b9a\u8981\u7f16\u8f91\u7684\u641c\u7d22\u6846\u7ec4\u4ef6")},buttons:{"\u53d6\u6d88":function(){a(this).dialog("close")},
"\u786e\u5b9a":function(){if(editingSearchBoxEditor!=null){var b=editingSearchBoxEditor.attr("name"),c=a("#searchBoxCats").val(),d=a("#searchBoxLines").val();if(d=="")d=1;editingSearchBoxEditor[b]("option","cat",c);editingSearchBoxEditor[b]("option","line",d);WidgetUtils.searchBox_init(editingSearchBoxEditor.find(".widget-searchbox"))}else alert("\u672a\u6307\u5b9a\u8981\u7f16\u8f91\u7684\u641c\u7d22\u6846\u7ec4\u4ef6");a(this).dialog("close")}}});a("#searchBoxLines").change(function(){var b=a(this).val();
if(!/^[0-9]{1,2}$/.test(b)){alert("\u8f93\u5165\u7684\u503c\u5fc5\u987b\u662f0-9\u7684\u4e00\u4f4d\u6216\u4e24\u4f4d\u6570\u5b57\uff01");a(this).val(1)}})},_createGroupDialog:function(){a("#widget-groups-dialog").dialog({show:null,hide:null,bgiframe:true,width:600,autoOpen:false,zIndex:1E5,modal:true,resizable:true,open:function(){if(editingGroupEditor!=null){var b=editingGroupEditor.attr("name"),c=editingGroupEditor[b]("option","gid");b=editingGroupEditor[b]("option","sortBy");c&&c.length>0&&a('#itemGroups option[value="'+
c+'"]').length>0?a("#itemGroups").val(c):a("#itemGroups").val(0);b?a("#itemsSortBy").val(b):a("#itemsSortBy").val("sortOrder_asc")}else alert("\u672a\u6307\u5b9a\u8981\u7f16\u8f91\u7684\u63a8\u5e7f\u7ec4\u7ec4\u4ef6")},buttons:{"\u53d6\u6d88":function(){a(this).dialog("close")},"\u786e\u5b9a":function(){if(editingGroupEditor!=null){var b=editingGroupEditor.attr("name"),c=a("#itemGroups").val();if(c=="0"){alert("\u8bf7\u9009\u62e9\u4e00\u4e2a\u5546\u54c1\u63a8\u5e7f\u7ec4");return}var d=a("#itemsSortBy").val();
editingGroupEditor[b]("option","sortBy",d);editingGroupEditor[b]("option","gid",c);editingGroupEditor[b]("refresh","group")}else alert("\u672a\u6307\u5b9a\u8981\u7f16\u8f91\u7684\u63a8\u5e7f\u7ec4\u7ec4\u4ef6");a(this).dialog("close")}}})},_createMain:function(){a("#main .ui-designer-content").designerContent()},_createWidgetTitleDialog:function(){a("#widgetTitleDialog").dialog({show:null,hide:null,bgiframe:false,autoOpen:false,width:300,zIndex:1E5,modal:true,resizable:true,buttons:{"\u53d6\u6d88":function(){a(this).dialog("close")},
"\u786e\u5b9a":function(){var b=a("#widgetTitleInput").val();if(b&&b.length>30)alert("\u7ec4\u4ef6\u6807\u9898\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc730");else{editingTitle!=null&&editingTitle.empty().append(b);a(this).dialog("close")}}}})},_createEditor:function(){a("#richEditorTextAreaDialog").dialog({autoOpen:false,width:820,zIndex:1E5,modal:true,open:function(){a("#richEditorTextArea").val(editing.html());DesignerUtils.initKissyEditor()},buttons:{"\u53d6\u6d88":function(){a(this).dialog("close")},
"\u786e\u5b9a":function(){if(editing!=null){editing.html(KEDITOR.getData());KEDITOR.setData("")}a(this).dialog("close")}},close:function(){a("#richEditorTextAreaDialog").empty().append('<textarea id="richEditorTextArea" style="width:98%;height:250px"></textarea>')}})},_createAlimamaBM:function(){a("#alimamaBMDialog").dialog({show:null,hide:null,bgiframe:true,autoOpen:false,width:620,zIndex:1E5,modal:true,buttons:{"\u53d6\u6d88":function(){a(this).dialog("close")},"\u786e\u5b9a":function(){if(editingAlimamaFlashBM&&
editingAlimamaFlashBM!=null){var b=editingAlimamaFlashBM.attr("src"),c=a("#alimamaBM").val();if(c==""){alert("\u8bf7\u586b\u5199\u963f\u91cc\u5988\u5988\u5e7f\u544a\u724c\u5730\u5740");return}if(b!=c){editingAlimamaFlashBM.attr("src",c);WidgetUtils.flashView_init(editingAlimamaFlashBM)}}a(this).dialog("close")}},close:function(){}});a("#modifyAlimamaBM").button().click(function(){var b=a("#alimamaBM").val();if((b=DesignerUtils.validateAlimamaFlashBM(b))&&b.length>0)window.open(b)||alert("\u8bf7\u8bbe\u7f6e\u6d4f\u89c8\u5668\u5141\u8bb8\u6253\u5f00\u5f53\u524d\u5f39\u51fa\u7a97\u53e3")})},
_createColorPicker:function(){a("#colorPicker").ColorPicker({onBeforeShow:function(){editingColor!=null&&a(this).ColorPickerSetColor(a.fmtColor(a("div",editingColor).css("backgroundColor"),"hexadecimal"))},onChange:function(b,c){if(editingColor!=null){a("div",editingColor).css("background-color","#"+c);b=editingColor.attr("id");if(!b||b==null)b="";switch(b){case "":a("#themeRoller").themeRoller("changeTheme","color",editingColor,"#"+c);break;case "hc_c":a(".keyLabel1 a").css("color","#"+c);break}}}}).hide()}})})(jQuery);var DesignerUtils={initKissyEditor:function(){KISSY.ready(function(a){a.use("editor",function(){var b=a.Editor;KEDITOR=b("#richEditorTextArea",{attachForm:false,baseZIndex:3E5,focus:true,pluginConfig:{"font-size":{items:[{value:"14px",attrs:{style:"position: relative; border: 1px solid #DDDDDD; margin: 2px; padding: 2px;"},name:" <span style='font-size:14px'>\u6807\u51c6</span><span style='position:absolute;top:1px;right:3px;'>14px</span>"},{value:"16px",attrs:{style:"position: relative; border: 1px solid #DDDDDD; margin: 2px; padding: 2px;"},
name:" <span style='font-size:16px'>\u5927</span><span style='position:absolute;top:1px;right:3px;'>16px</span>"},{value:"18px",attrs:{style:"position: relative; border: 1px solid #DDDDDD; margin: 2px; padding: 2px;"},name:" <span style='font-size:18px'>\u7279\u5927</span><span style='position:absolute;top:1px;right:3px;'>18px</span>"},{value:"20px",attrs:{style:"position: relative; border: 1px solid #DDDDDD; margin: 2px; padding: 2px;"},name:" <span style='font-size:20px'>\u6781\u5927</span><span style='position:absolute;top:1px;right:3px;'>20px</span>"}],
width:"115px"},resize:{direction:["y"]}}}).use("elementpaths,sourcearea,preview,separator,undo,separator,removeformat,font,format,forecolor,bgcolor,separator,list,indent,justify,separator,link,image,flash,separator,table,resize,separator,maximize")})})},isShowDragWidget:function(){var a=$.browser;if(a.msie)if(a.version=="6.0")return false;return true},convertPicSize:function(a){switch(a){case a>310:return 310;case a>160:return 160;case a>100:return 100;case a>60:return 60;case a>40:return 40}return 100},
initDesigner:function(){var a=$.browser,b="";if(a.msie)if(a.version=="6.0"){b="warn";$("#designerBrowserInfo").text("IE 6.0 \u6216\u4ee5IE 6.0\u4e3a\u5185\u6838\u7684\u6d4f\u89c8\u5668");$("#designerBrowserList").append("<li>\u7ec4\u4ef6\u62d6\u62fd\u529f\u80fd</li><li>\u4ea7\u54c1\u653e\u5927\u7ec4\u4ef6\u5f39\u51fa\u6548\u679c</li>")}else if(a.version=="7.0"){b="warn";$("#designerBrowserInfo").text("IE 7.0\u6216\u4ee5IE 7.0\u4e3a\u5185\u6838\u7684\u6d4f\u89c8\u5668")}b=="warn"&&$("#designerBrowserWarn").dialog({bgiframe:true,
autoOpen:false,height:320,width:450,zIndex:1E5,modal:true,closeText:"\u5173\u95ed",resizable:false,close:function(){},buttons:{"\u5173\u95ed\u63d0\u9192":function(){$(this).dialog("close")}}})},initSysDesigner:function(a){var b=this;b.initDesigner();b.initDesignerBar();b.loadItemGroups(function(){b.loadSysTemplate(a,function(){$("#designer").designer({tid:a})})})},initUserDesigner:function(a,b){var c=this;c.initDesigner();c.initDesignerBar();c.loadPages(function(){c.loadItemGroups(function(){c.loadUserTemplate(a,
function(){$("#designer").designer({tid:a,sid:b})})})})},initUserSysDesigner:function(a,b,c){var d=this;d.initDesigner();d.initDesignerBar();d.loadPages(function(){d.loadItemGroups(function(){d.loadSysTemplate(a,function(){$("#designer").designer({tid:b,stid:a,sid:c})},b)})})},initDesignerBar:function(){$("#ui-designer-topbar").designerTopBar().show();$("#widgets-tree").treeview({unique:true});DesignerUtils.isShowDragWidget()?$("#ui-designer-widgetbar").show():$("#ui-designer-widgetbar").hide();$("#designer").prepend('<div align="left" style="margin-left:10px;margin-top:50px;font-weight:bold;">\u6b63\u5728\u8f7d\u5165...</div>')},
validateAlimamaFlashBM:function(a){if(a&&a.length>0)try{var b=a.split("/"),c=b[b.length-1].split(".swf")[0].split("_");if(c&&c.length>=2)return"http://banner.alimama.com/ml?adboard_id="+c[0]+"&bannerSize="+c[2];else alert("\u8bf7\u786e\u8ba4\u5e7f\u544a\u724c\u5730\u5740\u662f\u5426\u6709\u6548")}catch(d){alert(d+"\u8bf7\u786e\u8ba4\u5e7f\u544a\u724c\u5730\u5740\u662f\u5426\u6709\u6548")}else alert("\u60a8\u5c1a\u672a\u586b\u5199\u963f\u91cc\u5988\u5988\u5e7f\u544a\u724cFlash\u52a8\u753b\u5730\u5740")},
loadPages:function(a){var b=this;(new WindSender("/router/member/pages?version="+Math.random())).load("GET",{},function(c){if(c.isSuccess()){if(c.body.length>0)for(var d=0;d<c.body.length>0;d++){var e=c.body[d];b.pages(e.id,e)}}else alert(c.msg);a&&typeof a=="function"&&a()},function(){$("#designer-loading").hide()})},getCurrentContainerLayout:function(){var a=[];$("#main .ui-designer-container").each(function(){var b=-1;switch($(this).attr("class").split(" ")[1]){case "middle-1":b="0";break;case "right-1-3":b=
"1";break;case "middle-1-3-1":b="2";break;case "left-1-1":b="3";break;case "right-1-1":b="3";break;case "left-1-1-1":b="4";break;case "middle-1-1-1":b="4";break;case "right-1-1-1":b="4";break;case "left-1-3":b="5";break;case "left-1-3-1":b="6";break;case "right-1-3-1":b="6";break;default:b="-1";break}b!=-1&&$.inArray(b,a)==-1&&a.push(b)});return a},getContainerClass:function(a){for(var b="",c=0;c<a.length;c++)switch(a[c]){case "0":b+="#main .middle-1,";break;case "1":b+="#main .right-1-3,";break;
case "2":b+="#main .middle-1-3-1,";break;case "3":b+="#main .left-1-1,#main .right-1-1,";break;case "4":b+="#main .left-1-1-1,#main .middle-1-1-1,#main .right-1-1-1,";break;case "5":b+="#main .left-1-3,";break;case "6":b+="#main .left-1-3-1,#main .right-1-3-1,";break}if(b.length>0)b=b.substring(0,b.length-1);return b},getLayoutDesc:function(a){for(var b="",c=0;c<a.length;c++)switch(a[c]){case "0":b+="\u3010\u5355\u680f\u3011";break;case "1":b+="\u3010\u4e24\u680f(1-3)\u53f3\u3011";break;case "2":b+=
"\u3010\u4e09\u680f(1-3-1)\u4e2d\u3011";break;case "3":b+="\u3010\u4e24\u680f(1-1)\u5de6/\u53f3\u3011";break;case "4":b+="\u3010\u4e09\u680f(1-1-1)\u5de6/\u4e2d/\u53f3\u3011";break;case "5":b+="\u3010\u4e24\u680f(1-3)\u5de6\u3011";break;case "6":b+="\u3010\u4e09\u680f(1-3-1)\u5de6/\u53f3\u3011";break}return b},checkLayouts:function(a,b){var c=this;a.each(function(){for(var d=false,e=$(this).attr("layout").split(","),f=0;f<e.length;f++)if($.inArray(e[f],b)!=-1)d=true;if(d){d=c.getContainerClass(e);
$(this).draggable("enable").draggable("option","connectToSortable",d);$("span",$(this)).attr("title","\u62d6\u62fd\u6b64\u7ec4\u4ef6\u81f3\u8bbe\u8ba1\u533a\u4e2d\u7684\u5e03\u5c40\u5bb9\u5668")}else{$(this).draggable("disable");$("span",$(this)).attr("title","\u8bf7\u6dfb\u52a0\u5e03\u5c40\u5bb9\u5668"+c.getLayoutDesc(e)+(e.length>1?"\u4e2d\u7684\u4e00\u4e2a":""))}})},initWidgetBarPermission:function(){var a=this,b=this.getCurrentContainerLayout();if(b.length==0){$("#widgets-tree li.widget").draggable("disable");
$("#widgets-tree li.widget span").attr("title","\u8bf7\u6dfb\u52a0\u5e03\u5c40\u5bb9\u5668")}else{if($("body").data("isGroups"))this.checkLayouts($("#widgets-tree-group li.widget"),b);else{$("#widgets-tree-group li.widget").draggable("disable");$("#widgets-tree-group li.widget span").attr("title","\u60a8\u76ee\u524d\u8fd8\u6ca1\u6709\u6dfb\u52a0\u63a8\u5e7f\u7ec4\uff0c\u65e0\u6cd5\u4f7f\u7528\u6b64\u7ec4\u4ef6")}$('#widgets-tree-custome li.widget[wname="widgetCustomer"]').each(function(){var c=$(this).attr("layout");
if($.inArray(c,b)!=-1){c=a.getContainerClass(c.split(","));$(this).draggable("enable").draggable("option","connectToSortable",c);$("span",$(this)).attr("title","\u62d6\u62fd\u6b64\u7ec4\u4ef6\u81f3\u8bbe\u8ba1\u533a\u4e2d\u7684\u5e03\u5c40\u5bb9\u5668")}else{$(this).draggable("disable");$("span",$(this)).attr("title","\u8bf7\u6dfb\u52a0\u5e03\u5c40\u5bb9\u5668"+a.getLayoutDesc(c))}});this.checkLayouts($("#widgets-tree-mama li.widget,#widgets-tree-other li.widget"),b)}},createContainerOverlay:function(a){$("#main .ui-designer-container:not("+
a+")").each(function(){var b=$(this).offset();$("body").append('<div class="container-overlay" style="opacity: 0.4; filter:Alpha(Opacity=40);position:absolute;background:#456;left:'+b.left+"px;top:"+b.top+"px;width:"+($(this).width()+5)+"px;height:"+($(this).height()+15)+'px"></div>')})},_initWidgetsBar:function(){var a=this;$("#widgets-tree li.widget").draggable({iframeFix:true,helper:function(){var b=$(this).attr("wname");if("widgetCustomer"==b)return $(this).clone().css("background","none");b=
placeHolders[b];if(!b)return $(this).clone().css("background","none");return $('<div style="position:relative;z-Index:1000000;"><img src="/assets/min/images/widget/'+b.image+'.png" style="border:3px solid gray;"/></div>')[0]},revert:"invalid",connectToSortable:".ui-designer-container",start:function(){$(".container-overlay").remove();var b=$(this).attr("wname");$('.previewWidgetImg[wname="'+b+'"]').hide();isWidgetHandle=false;b=$(this).attr("layout");b=a.getContainerClass(b.split(","));$(this).draggable("option",
"connectToSortable",b);a.createContainerOverlay(b)},stop:function(){isWidgetHandle=true;$(".container-overlay").remove()}}).draggable("disable").hover(function(){$("#widgets-tree li.widget").removeClass("hover");$(this).addClass("hover")},function(){$(this).removeClass("hover")});$('#widgets-tree li.widget[wname!="widgetCustomer"]').hover(function(b){var c=$(this).attr("wname"),d=$(this).offset().left+120;$('.previewWidgetImg[wname="'+c+'"]').css({left:d,top:b.clientY-40+a.f_scrollTop()}).show()},
function(){var b=$(this).attr("wname");$('.previewWidgetImg[wname="'+b+'"]').hide()})},f_filterResults:function(a,b,c){a=a?a:0;if(b&&(!a||a>b))a=b;return c&&(!a||a>c)?c:a},f_scrollTop:function(){return this.f_filterResults(window.pageYOffset?window.pageYOffset:0,document.documentElement?document.documentElement.scrollTop:0,document.body?document.body.scrollTop:0)},_prependCustomeWidgets:function(a,b){if(b.length>0){a=$("#widgets-tree-custome-"+a);for(var c=$("#designer-widgets-dialog ul.designer-widgets-custome"),
d=$("#widget-customes-dialog ul.designer-widgets-custome"),e=0;e<b.length;e++){var f=b[e];a.prepend('<li class="widget" layout="'+f.layout+'" wname="widgetCustomer" wid="'+f.id+'"><span title="'+f.name+'" class="file">'+f.name+"</span></li>");f='<li class="widget" layout="'+f.layout+'" widget="widgetCustomer" wid="'+f.id+'" title="'+f.name+'">'+f.name+"</li>";c.append(f);d.append(f)}}this._initWidgetsBar()},_initCustomeWidgetsBar:function(a){for(var b=0;b<7;b++)this._prependCustomeWidgets(b,a[b+""])},
loadItemGroups:function(a){var b=this;(new WindSender("/router/member/designer/mycustomewidgets?version="+Math.random())).load("GET",{},function(c){if(c.isSuccess()){b._initCustomeWidgetsBar(c.body);(new WindSender("/router/member/designer/itemgroups?version="+Math.random())).load("GET",{},function(d){if(d.isSuccess())if(d.body.length>0){$("body").data("isGroups",true);$(".ui-designer-groups").empty().append('<option value="0">\u9009\u62e9\u63a8\u5e7f\u7ec4</option>');for(var e=0;e<d.body.length>
0;e++){var f=d.body[e];b.items(f.id,f.items);$("#widget-groups-dialog .ui-designer-groups").append('<option value="'+f.id+'">'+f.name+"</option>")}}else $("body").data("isGroups",false);else alert(d.msg);a&&typeof a=="function"&&a()},function(){$("#designer-loading").hide()})}else alert(c.msg)})},items:function(a,b){b&&b!=null&&$("body").data("g_"+a,b);return $("body").data("g_"+a)},pages:function(a,b){var c=$("body").data("pages");if(!c||c==null)c={};if(b&&b!=null)c[a]=b;$("body").data("pages",c)},
loadUserTemplate:function(a,b){this.loadTemplate("/router/member/designer/template/user/"+a+"?version="+Math.random(),b)},loadSysTemplate:function(a,b,c){c?this.loadTemplate("/router/member/designer/template/system/"+a+"?utid="+c+"&version="+Math.random(),b):this.loadTemplate("/router/member/designer/template/system/"+a+"?version="+Math.random(),b)},loadTemplate:function(a,b){$.ajax({url:a,type:"GET",data:{},dataType:"html",contentType:"charset=utf-8",beforeSend:function(c){c.setRequestHeader("WindType",
"AJAX");c.setRequestHeader("WindDataType","HTML")},error:function(){alert("\u6307\u5b9a\u6a21\u677f\u52a0\u8f7d\u5931\u8d25,\u542f\u7528\u7a7a\u767d\u6a21\u677f");$("#designer").load("/designer/default.html",function(){$("body").prepend(tools);b&&typeof b=="function"&&b()})},success:function(c){$("#designer").empty();$("#designer").append(c);b&&typeof b=="function"&&b()}})},displaySize:function(a){var b=$("#ui-designer-size");a.hover(function(c){b.css("top",c.pageY+10);b.css("left",c.pageX+10);$("#oWidth").text($(this).parent().width());
$("#oHeight").text($(this).parent().height());b.show()},function(){b.hide()})},isURL:function(a){if(a&&a.indexOf("s.click")!=-1)return true;return(new RegExp("^((https|http|ftp|rtsp|mms)?://)?(([0-9a-z_!~*'().&=+$%-]+: )?[0-9a-z_!~*'().&=+$%-]+@)?(([0-9]{1,3}.){3}[0-9]{1,3}|([0-9a-z_!~*'()-]+.)*([0-9a-z][0-9a-z-]{0,61})?[0-9a-z].[a-z]{2,6})(:[0-9]{1,4})?((/?)|(/[0-9a-z_!~*'().;?:@&=+$,%#-]+)+/?)$")).test(a)?true:false},json2str:function(a){var b=[];if(typeof a=="string")return'"'+a.replace(/([\'\"\\])/g,
"\\$1").replace(/(\n)/g," \\n").replace(/(\r)/g,"\\r").replace(/(\t)/g,"\\t")+'"';if(typeof a=="object"){if(a==null)b=b.join()+"null";else if(a.sort){var c=a.length;for(d=0;d<c;){b.push(DesignerUtils.json2str(a[d]));d++}b="["+b.join()+"]"}else{for(var d in a)b.push(d+":"+DesignerUtils.json2str(a[d]));c=a.toString;document.all&&!/^\n?function\s*toString\(\)\s*\{\n?\s*\[native code\]\n?\s*\}\n?\s*$/.test(c)&&b.push("toString:"+c.toString());b="{"+b.join()+"}"}try{return b}finally{b=null;delete b}}try{return a.toString()}finally{a=
null;delete a}}};function getImagePath(a){if(a&&a.length>0)return a.replace("http://"+window.location.host,"");return""}
function taobaoCredit(a){switch(a){case 1:return"s_red_1";case 2:return"s_red_2";case 3:return"s_red_3";case 4:return"s_red_4";case 5:return"s_red_5";case 6:return"s_blue_1";case 7:return"s_blue_2";case 8:return"s_blue_3";case 9:return"s_blue_4";case 10:return"s_blue_5";case 11:return"s_cap_1";case 12:return"s_cap_2";case 13:return"s_cap_3";case 14:return"s_cap_4";case 15:return"s_cap_5";case 16:return"s_crown_1";case 17:return"s_crown_2";case 18:return"s_crown_3";case 19:return"s_crown_4";case 20:return"s_crown_5";
default:return"s_red_1"}}function convertPID(){return PID.replace("mm_","").replace("_0_0","")}function saveEditor(a){var b=a.id,c=$("#"+b).parent();a=c.parent();var d=tinyMCE.get(b).getContent()+"";c.empty().append(d);tinyMCE.execCommand("mceRemoveControl",false,b);$("#"+b).remove();editing=null;b=c.width();a.height(a.height()-(b<435?b<210?100:80:50));a.resizable("enable")}
function loadAllItemGroups(a){(new WindSender("/router/member/designer/itemgroups?version="+Math.random())).load("GET",{},function(b){if(b.isSuccess()){if(b.body.length>0){$(".ui-designer-groups").empty().append('<option value="0">\u9009\u62e9\u63a8\u5e7f\u7ec4</option>');for(var c=0;c<b.body.length>0;c++){var d=b.body[c];d.items&&d.items!=null&&$("body").data("g_"+d.id,d.items);$(".ui-designer-groups").append('<option value="'+d.id+'">'+d.name+"</option>")}}}else alert(b.msg);a&&typeof a=="function"&&
a()})}function previewCommission(a){$(".a-s,.l-a-s,.l-a-s-p,.d-a-i,.l-d-a-i,.l-d-a-i-p",a).each(function(){addViewCommission($(this))})}
function addViewCommission(a){var b=a.attr("co"),c="\u4f63\u91d1:",d="\u5143";if(!b){b=a.attr("cr");c="\u4f63\u91d1\u6bd4\u4f8b:";d="%"}b&&a.append('<div class="c-c" title="'+c+b+d+'" style="position: absolute;text-align: center;line-height: 14px;height: 14px;background: #F60;color: white;border: 1px solid blue;cursor: pointer;top:-2px;left:0px;">'+c+b+d+"</div>")};(function(a){a.widget("ui.designerFooter",{options:{},toSource:function(){var b=this.element.clone();b.css("border-style","none");return a("<div></div>").append(b).html()},_footerOver:function(){},_footerOut:function(){},_create:function(){},_init:function(){var b=this;o=b.options;var c=b.element;c.load("/designer/assets/toolbar/footer.html");c.hover(function(){b._footerOver(a(this))},function(){b._footerOut(a(this))})}})})(jQuery);(function(a){a.widget("ui.designerContent",{options:{},toSource:function(b){var c='<div class="ui-designer-content">';a(".ui-designer-container",this.element).each(function(){c+=a(this).designerContainer("toSource",b)});c+="</div>";return c},_create:function(){},_init:function(){var b=this.element;b.attr("id")||b.attr("id","c_"+parseInt(Math.random()*1E8));if(b.find(".ui-designer-container").length>1)a.browser.msie&&a.browser.version=="6.0"?b.find(".ui-designer-container:last").css("margin-right",
0).siblings().css("margin-right",2):b.find(".ui-designer-container:last").css("margin-right",0).siblings().css("margin-right",5);a(".ui-designer-container",b).designerContainer()},changeDesigner:function(){var b=this.element;if(isWidgetHandle){b.css("border","");a(".ui-designer-content-handle",b).hide()}else{b.css("border","2px inset #348feb");a(".ui-designer-content-handle",b).show();a(".layoutsContentSelect",b).val(b.attr("layout"))}},hideContainer:function(){this.element.attr("cHeight",this.element.height()).height(33).resizable("disable");
a(".ui-designer-container",this.element).each(function(){a(this).attr("cHeight",a(this).height()).height(0)});a(".contentHide",this.element).button("option","label","\u663e\u793a\u6b64\u5bb9\u5668")},showContainer:function(){this.element.height(parseInt(this.element.attr("cHeight"))).resizable("enable");a(".ui-designer-container",this.element).each(function(){a(this).height(parseInt(a(this).attr("cHeight")))});a(".contentHide",this.element).button("option","label","\u6682\u65f6\u9690\u85cf\u6b64\u5bb9\u5668")}})})(jQuery);(function(a){a.widget("ui.designerHeader",{options:{},toSource:function(){var b=a(".ui-designer-header-tabs",this.element),c="<div id='ui-designer-header' class='ui-designer-header ui-widget ui-widget-content' style='width:"+this.element.width()+"px;height:"+this.element.height()+"px;",d=this.element.find(".header-flash"),e=this.element.find(".header-image");if(d.length==0&&d.attr("src")=="")c+="background-image:"+getImagePath(this.element.css("background-image"))+";background-repeat:no-repeat;";
c+="'>";if(d.length>0){e=d.attr("src");c+='<div class="header-flash"';e||(e="");c+=' src="'+e+'" style="'+d.attr("style")+'"></div>'}else if(e.length>0)c+=a("<div></div>").append(e.clone()).html();d=a("ul",b).clone();this._convertHref(d);c+="<div class='ui-designer-header-tabs' style='left:"+b.css("left")+";top:"+b.css("top")+";'><div class='ui-designer-header-tabs-handle'></div><ul theme='"+(d.attr("theme")!=null?d.attr("theme"):"")+"'>"+d.html()+"</ul></div></div>";return c},_convertHref:function(b){a("li a",
b).each(function(){var c=a(this).attr("href").replace("http://"+document.domain,"").replace(PID,"%7Bpid%7D").replace(PID,"%7Bpid%7D");a(this).attr("href",c)})},_headerOver:function(){if(ISINDEX){this.element.append(a("#ui-designer-header-tools"));this.element.css("z-Index",10000999);a(".ui-designer-header-tabs-handle").attr("title","\u62d6\u62fd\u79fb\u52a8\u5bfc\u822a\u680f\u4f4d\u7f6e").show();a("#ui-designer-header-tools").show()}},_headerOut:function(){if(ISINDEX){a("#ui-designer-header-tools").hide();
a(".ui-designer-header-tabs-handle").hide();this.element.css("z-Index",0)}},_create:function(){},_init:function(){var b=this,c=b.element;if(ISINDEX){var d=a("#ui-designer-header-tools"),e=a("#ui-designer-header-tools-dialog").dialog({bgiframe:true,autoOpen:false,width:940,zIndex:1E5,resizable:false,modal:true});a("#headerTabs").tabs({cache:true});var f=a(".ui-designer-header-tabs",c);f.append(a(".ui-designer-header-tabs-handle").show());var g=a("#headerSet");c.prepend(d);c.click(function(h){h.stopPropagation()});
f.draggable({handle:".ui-designer-header-tabs-handle",containment:".ui-designer-header",cursor:"move"});c.hover(function(){b._headerOver()},function(){b._headerOut()});g.button().unbind("click").click(function(){b._headerOut();e.dialog("open")})}else c.append('<div style="position:absolute;right:0px;top:0px;color:#FF0084;font-weight:bold;font-size:14pt;">\u5b50\u9875\u9762\u4e0d\u53ef\u7f16\u8f91\u6b64\u533a\u57df</div>');c.css("border","1px solid #DDD");c=this.element.find(".header-flash");d=this.element.find(".header-image");
if(c.length>0)c.attr("src")!=""?WidgetUtils.addHeaderFlash(c):WidgetUtils.addHeaderSmartAdsFlash(c);else d.length>0&&WidgetUtils.addHeaderImage(d);WidgetUtils.designerHeaderTabs_init(a(".ui-designer-header-tabs"))}})})(jQuery);(function(a){a.widget("ui.netLinkViewEditor",{options:{},_create:function(){},_init:function(){var b=this;o=b.options;var c=b.element;c.dialog({show:null,hide:null,bgiframe:true,autoOpen:false,resizable:false,width:780,height:400,zIndex:1E5,modal:true,open:function(){var d=a("ul",a(this));a("li",d).remove();if(editingNetLink!=null){var e=a("li a",editingNetLink);e.length>0?e.each(function(){var f=true;if("left"==a(this).parent().css("float"))f=false;d.append(b._createLi(a(this).text(),a(this).attr("href"),
f))}):d.append(b._createLi("","",false))}else alert("\u672a\u6307\u5b9a\u8981\u7f16\u8f91\u7684\u53cb\u60c5\u94fe\u63a5")},buttons:{"\u53d6\u6d88":function(){a(this).dialog("close")},"\u786e\u8ba4":function(){var d=a(".linkeditor-title",a(this));d.length==0&&alert("\u5c1a\u672a\u6dfb\u52a0\u53cb\u60c5\u94fe\u63a5");var e=0;d.each(function(){var f=a(this).val();if(!f||f==""){alert("\u8bf7\u586b\u5199\u94fe\u63a5\u6807\u9898");a(this).focus();e++;return false}});if(!(e>0)){e=0;a(".linkeditor-href",
a(this)).each(function(){var f=a(this).val();if(f==""){alert("\u94fe\u63a5\u5730\u5740\u4e0d\u80fd\u4e3a\u7a7a");a(this).focus();e++;return false}if(!DesignerUtils.isURL(f)){alert("\u94fe\u63a5\u5730\u5740\u4e0d\u5408\u6cd5.");a(this).focus();e++;return false}f.indexOf("http://")==-1&&a(this).val("http://"+f)});if(!(e>0)){e=0;a("li",editingNetLink).remove();a("ul li",a(this)).each(function(){editingNetLink.append(b._createLiNetLink(a(this)))});a(this).dialog("close")}}}}});a("#netLinkConfirmButton").button().click(function(){b.addSiteUrl()});
a("#netLinkCancelButton").button().click(function(){c.dialog("close")});a("#netLink_add").button().click(function(){b.addSiteUrl()})},_createLiNetLink:function(b){var c=a(".linkeditor-title",b).val(),d=a(".linkeditor-href",b).val();return b='<li style="float:'+(a('input[type="checkbox"]',b).attr("checked")?"none":"left")+'"><a target="_blank" href="'+d+'" class="title" title="'+c+'">'+c+"</a></li>"},_createLi:function(b,c,d){var e=this,f='<li><a class="linkeditor-add">\u65b0\u589e</a><a class="linkeditor-remove">\u5220\u9664</a><a class="linkeditor-up">\u4e0a\u79fb</a><a class="linkeditor-down">\u4e0b\u79fb</a>';
f+='<input class="linkeditor-title" value="'+b+'"/><input class="linkeditor-href" value="'+c+'"/><input type="checkbox" '+(d?"checked":"")+">\u662f\u5426\u7ad6\u6392";f+="</li>";f=a(f);a(".linkeditor-add",f).click(function(){a(this).parent().after(e._createLi("",""))});a(".linkeditor-remove",f).click(function(){var g=a(this).parent();g.parent().find("li").length==1?alert("\u4e0d\u80fd\u5220\u9664\u8be5\u5217\uff0c\u60a8\u81f3\u5c11\u8981\u4fdd\u7559\u4e00\u4e2a\u53cb\u60c5\u94fe\u63a5"):g.remove()});
a(".linkeditor-up",f).click(function(){var g=a(this).parent(),h=g.prev();h.length==1?h.before(g):g.parent().append(g)});a(".linkeditor-down",f).click(function(){var g=a(this).parent(),h=g.next();h.length==1?h.after(g):g.parent().prepend(g)});return f},addSiteUrl:function(){var b=a("#netLink_title").val();if(b=="")alert("\u94fe\u63a5\u6807\u9898\u4e0d\u80fd\u4e3a\u7a7a");else{var c=a("#netLink_href").val();if(c=="")alert("\u94fe\u63a5\u5730\u5740\u4e0d\u80fd\u4e3a\u7a7a");else if(DesignerUtils.isURL(c)){if(c.indexOf("http://")==
-1)c="http://"+c;if(editingNetLink.find('li a[href="'+c+'"][ntype="self"]').length>0)alert("\u53cb\u60c5\u94fe\u63a5\u91cd\u590d,\u8bf7\u66f4\u6539\u53cb\u60c5\u94fe\u63a5\u5730\u5740");else{var d=a('input[type="radio"][name="netLinkLayout"]:checked');_float=d.length>0&&d.val()=="1"?' style="float:none"':' style="float:left"';c=a("<li"+_float+'><a target="_blank" ntype="self" href="'+c+'">'+b+"</a></li>");editingNetLink.append(c);this.addLiHover(c);alert("\u53cb\u60c5\u94fe\u63a5\u3010"+b+"\u3011\u6dfb\u52a0\u6210\u529f");
a("#netLink_title").val("");a("#netLink_href").val("")}}else alert("\u94fe\u63a5\u5730\u5740\u4e0d\u5408\u6cd5.")}},getHtmlNetLinkSearch:function(b,c){this.getHtmlContent("/router/member/designer/netlink/search","POST",{type:b,keyword:c},function(d){a("#rightContent").empty();a("#rightContent").append(d)})},getHtmlContent:function(b,c,d,e){a("#rightContent").empty();a("#rightContent").append("<div id='loading' align='left'>\u6b63\u5728\u52a0\u8f7d\u6570\u636e,\u8bf7\u7a0d\u5019...</div>");a.ajax({url:b,
type:c,data:d,dataType:"html",beforeSend:function(f){f.setRequestHeader("WindType","AJAX");f.setRequestHeader("WindDataType","HTML")},error:function(f,g){a("#loading").remove();alert(g)},success:function(f){a("#loading").remove();e(f)}})},addLiHover:function(b){b.hover(function(){var c=a(this).position().top,d=a(this).position().left;a(this).append('<div id="deleteImg" style="cursor: pointer;position:absolute;top:'+(c-15)+"px;left:"+d+'px;"><img src="/assets/images/delete.gif"/></div>');a("#deleteImg").click(function(){a(this).parent().remove()})},
function(){a("#deleteImg").remove()})}})})(jQuery);(function(a){a.widget("ui.themeRoller",{options:{},_create:function(){},_init:function(){var b=this;o=b.options;var c=b.element;c.hide();a("#confirmTheme").button().click(function(){if(confirm("\u786e\u8ba4\u4f7f\u7528\u5f53\u524d\u76ae\u80a4\u8bbe\u8ba1")){var d=a('#sysThemes li[class="ui-selected"]');if(d.length==0)alert("\u5c1a\u672a\u9009\u62e9\u4e3b\u9898\u76ae\u80a4");else{b.changeSysTheme(d.attr("systheme"),d.attr("navtheme"));a("#ui-designer-topbar").tabs({selected:-1});a("body").data("skin",
d.attr("systheme").split("-")[1])}}});a("#previewTempButton").button().click(function(){var d=a('#sysThemes li[class="ui-selected"]');if(d.length==0)alert("\u5c1a\u672a\u9009\u62e9\u4e3b\u9898\u76ae\u80a4");else{b.changeSysTheme(d.attr("systheme"),d.attr("navtheme"));a("body").data("skin",d.attr("systheme").split("-")[1]);a("#ui-designer-topbar").designerTopBar("preview",true)}});a("#sysThemes li").click(function(){a(this).toggleClass("ui-selected").siblings().removeClass("ui-selected");a("#previewTempButton").button("option",
"label","\u9884\u89c8\u3010"+a(this).attr("title")+"\u3011\u4e3b\u9898")}).hover(function(){a(this).toggleClass("ui-selecting").siblings().removeClass("ui-selecting")},function(){a(this).removeClass("ui-selecting")});c.show()},changeSysTheme:function(b){a('link[title="siteStyle"]').attr("href","/assets/min/css/"+b.split("-")[1]+".css?v="+Math.random())}})})(jQuery);(function(a){var b=[],c=null;a.widget("ui.designerTopBar",{options:{},templateInfoUpdate:function(){a("#designer-loading").show();var d="";d=desigerModel=="user"?"/router/member/designer/template/update/user/":"/router/member/designer/template/update/system/";(new WindSender(d+a("#designer").designer("option","tid"))).load("POST",{template_name:a("#template_name").val(),template_desc:a("#template_desc").val()},function(e){e.isSuccess()?alert("\u6a21\u677f\u57fa\u672c\u4fe1\u606f\u4fee\u6539\u6210\u529f!"):
alert(e.msg);a("#designer-loading").hide()},function(){a("#designer-loading").hide()})},designerDeploy:function(){if(confirm("\u60a8\u786e\u5b9a\u53d1\u5e03\u5f53\u524d\u6a21\u677f\u5417\uff1f")){a("#designer-loading").show();var d=new WindSender("/router/member/designer/template/update/user/"+a("#designer").designer("option","tid")),e="";try{e=a("#designer").designer("toSource",true)}catch(f){a.browser.msie?alert("\u53d1\u5e03\u6a21\u677f\u53d1\u751f\u9519\u8bef:"+f.message):alert("\u53d1\u5e03\u6a21\u677f\u53d1\u751f\u9519\u8bef:"+
f);a("#designer-loading").hide();return}var g=a("body").data("gids"),h=a("body").data("customes"),i=a("body").data("skin");if(i==null)i=SKIN;if(h==null)h=[];var j=a("#ui-designer-header");if(j.length==0)j=a(".ui-designer-header");var l=j.designerHeader("toSource");d.load("POST",{template_content:e,template_header:l,template_gids:g,template_skin:i,template_customes:h.join(",")},function(k){k.isSuccess()?(new WindSender("/router/member/designer/deploy/"+a("#designer").designer("option","tid"))).load("GET",
{},function(m){if(m.isSuccess()){alert("\u6a21\u677f\u53d1\u5e03\u6210\u529f!");if((document.location.href+"").indexOf("stid=")!=-1)document.location.href="/router/member/designer?tid="+a("#designer").designer("option","tid")+""}else alert(m.msg)}):alert(k.msg);a("#designer-loading").hide()},function(){a("#designer-loading").hide()})}},designerSysDeploy:function(){if(confirm("\u60a8\u786e\u5b9a\u53d1\u5e03\u5f53\u524d\u7cfb\u7edf\u6a21\u677f\u5417\uff1f")){a("#designer-loading").show();(new WindSender("/router/member/designer/deploy/sys/"+
a("#designer").designer("option","tid"))).load("GET",{},function(d){d.isSuccess()?alert("\u7cfb\u7edf\u6a21\u677f\u53d1\u5e03\u6210\u529f!"):alert(d.msg);a("#designer-loading").hide()},function(){a("#designer-loading").hide()})}},designerSysSave:function(){if(window.confirm("\u786e\u8ba4\u8981\u8986\u76d6\u65e7\u7684\u7cfb\u7edf\u6a21\u677f\u8bbe\u8ba1\u5417?")){a("#designer-loading").show();var d=new WindSender("/router/member/designer/template/update/system/"+a("#designer").designer("option","tid")),
e="";try{e=a("#designer").designer("toSource")}catch(f){}var g=a("body").data("gids"),h=a("body").data("customes"),i=a("body").data("skin");if(i==null)i=SKIN;if(h==null)h=[];var j=a("#ui-designer-header");if(j.length==0)j=a(".ui-designer-header");var l=j.designerHeader("toSource");d.load("POST",{template_content:e,template_header:l,template_gids:g,template_skin:i,template_customes:h.join(",")},function(k){k.isSuccess()?alert("\u7cfb\u7edf\u6a21\u677f\u4fee\u6539\u6210\u529f!"):alert(k.msg);a("#designer-loading").hide()},
function(){a("#designer-loading").hide()})}},designerSysSaveOther:function(){if(window.confirm("\u786e\u8ba4\u8981\u53e6\u5b58\u7cfb\u7edf\u6a21\u677f\u8bbe\u8ba1\u5417?")){a("#designer-loading").show();var d=new WindSender("/router/member/designer/template/save/system"),e="";try{e=a("#designer").designer("toSource")}catch(f){}var g=a("body").data("gids"),h=a("body").data("skin");if(h==null)h=SKIN;var i=a("body").data("customes");if(i==null)i=[];var j=a("#s_template_name").val();h=a("#s_template_skin").val();
var l=a("#s_template_desc").val(),k=a("#ui-designer-header");if(k.length==0)k=a(".ui-designer-header");var m=k.designerHeader("toSource");d.load("POST",{template_content:e,template_header:m,template_gids:g,template_name:j,template_skin:h,template_desc:l,template_customes:i.join(",")},function(n){if(n.isSuccess()){alert("\u7cfb\u7edf\u6a21\u677f\u65b0\u589e\u6210\u529f!");a("#designer").designer("option","tid",n.body.id)}else alert(n.msg);a("#designer-loading").hide()},function(){a("#designer-loading").hide()})}},
designerSave:function(){if(window.confirm("\u786e\u8ba4\u8981\u8986\u76d6\u65e7\u7684\u6a21\u677f\u8bbe\u8ba1\u5417?")){a("#designer-loading").show();var d=new WindSender("/router/member/designer/template/update/user/"+a("#designer").designer("option","tid")),e="";try{e=a("#designer").designer("toSource")}catch(f){}var g=a("body").data("gids"),h=a("body").data("skin");if(h==null)h=SKIN;var i=a("body").data("customes");if(i==null)i=[];var j=a("#ui-designer-header");if(j.length==0)j=a(".ui-designer-header");
var l=j.designerHeader("toSource");d.load("POST",{template_content:e,template_header:l,template_gids:g,template_skin:h,template_customes:i.join(",")},function(k){if(k.isSuccess()){alert("\u6a21\u677f\u4fee\u6539\u6210\u529f!");if((document.location.href+"").indexOf("stid=")!=-1)document.location.href="/router/member/designer?tid="+a("#designer").designer("option","tid")+""}else alert(k.msg);a("#designer-loading").hide()},function(){a("#designer-loading").hide()})}},preview:function(d){a("#designerForm").attr("action",
"/router/member/designer/preview?version="+Math.random());try{true==d?a("#designerSource").val(a("#designer").designer("toSource",false,true)):a("#designerSource").val(a("#designer").designer("toSource"))}catch(e){alert(e);return}d=a("#ui-designer-header");if(d.length==0)d=a(".ui-designer-header");var f=d.designerHeader("toSource");a("#designerHeader").val(f);var g=a("body").data("skin");if(g==null)g=SKIN;a("#designerSkin").val(g);d=a("body").data("gids");d!=null&&d.length>0&&a("#designerGids").val(d);
a("#designerForm").submit();a("#designerSource").val("");a("#designerHeader").val("");a("body").removeData("gids");a("#designerGids").val("")},enable:function(){this.element.tabs("option","disabled",[]);a("#designerDeploy").button("enable");a("#designerSaveOther").button("enable");a("#designerSave").button("enable");a("#preview").button("enable");a("#backSystemTemplates").button("enable");a("#checkoutMySite").button("enable");a("#changeDesignerModel").button("enable");a("#commissionView").button("enable");
a("#changePageDesigner").button("enable");if(DesignerUtils.isShowDragWidget())a("#changeDragWidget").button("enable");else{a("#changeDragWidget").click();a("#changeDragWidget").button("disable")}},_create:function(){},_init:function(){var d=this;o=d.options;var e=d.element;e.tabs({disabled:[0,1,2,3],cache:true,autoHeight:true,collapsible:true,selected:-1,select:function(){},show:function(f,g){g.panel==a("#view-contents")[0]&&d._layoutTab()}});a("#ui-designer-topbar-hide").click(function(){if(a(this).text()==
"\u9690\u85cf\u5de5\u5177\u680f"){e.hide();a(this).text("\u663e\u793a\u5de5\u5177\u680f");a("#designer").css("margin-top",10)}else{e.show();a(this).text("\u9690\u85cf\u5de5\u5177\u680f");a("#designer").css("margin-top",50)}});d._layoutTabInit();a("#checkoutMySite").button({disabled:true}).unbind("click").click(function(){a("#checkoutMySiteVersion").val(Math.random());a("#checkoutMySiteForm").attr("action","http://shop"+USERID+".xintaonet.com?version="+Math.random()).submit()});a("#commissionView").button({disabled:true}).unbind("click").click(function(){if(a(this).button("option",
"label")=="\u4f63\u91d1\u67e5\u770b\u6a21\u5f0f"){d._viewCommission();a(this).button("option","label","\u6b63\u5e38\u6a21\u5f0f");isCommissionView=true}else{a(".c-c").remove();a(this).button("option","label","\u4f63\u91d1\u67e5\u770b\u6a21\u5f0f");isCommissionView=false}});a("#changeDragWidget").button({disabled:true}).unbind("click").click(function(){if(a(this).button("option","label")=="\u5207\u6362\u4e3a\u4f20\u7edf\u6a21\u5f0f"){a("#main .ui-designer-container").each(function(){a(".ui-designer-widget",
a(this)).length==0&&a(this).prepend(addWidgetA())});a("#ui-designer-widgetbar").hide();isDragWidget=false;a(this).button("option","label","\u5207\u6362\u4e3a\u62d6\u62fd\u6a21\u5f0f");a(this).parent().attr("title","\u5f53\u524d\u4e3a\u4f20\u7edf\u6a21\u5f0f\uff0c\u60a8\u53ef\u4ee5\u901a\u8fc7\u70b9\u51fb\u7ec4\u4ef6\u5de5\u5177\u680f\u4e0a\u7684\u65b0\u589e\u6309\u94ae\u6765\u6dfb\u52a0\u7ec4\u4ef6\u8bbe\u8ba1\u9875\u9762")}else{a("#main .ui-designer-container").each(function(){a(".add-widget-a",
a(this)).remove()});isDragWidget=true;a("#ui-designer-widgetbar").show();a(this).button("option","label","\u5207\u6362\u4e3a\u4f20\u7edf\u6a21\u5f0f");a(this).parent().attr("title","\u5f53\u524d\u4e3a\u62d6\u62fd\u6a21\u5f0f\uff0c\u60a8\u53ef\u4ee5\u901a\u8fc7\u62d6\u62fd\u7ec4\u4ef6\u6811\u4e0a\u7684\u7ec4\u4ef6\u6765\u8bbe\u8ba1\u9875\u9762")}});a("#return").button().unbind("click").click(function(){document.location.href="/router/member/sitemanager"});a("#templateUpdate").button().unbind("click").click(function(){d.templateInfoUpdate()});
a("#templateUpdateClose").button().unbind("click").click(function(){e.tabs("option","selected",-1)});a("#designerDeploy").button({disabled:true}).unbind("click").click(function(){desigerModel=="user"?d.designerDeploy():d.designerSysDeploy()});a("#designerSaveOther").button({disabled:true}).unbind("click").click(function(){d.designerSysSaveOther()});a("#designerSave").button({disabled:true}).unbind("click").click(function(){desigerModel=="user"?d.designerSave():d.designerSysSave()});a("#preview").button({disabled:true}).unbind("click").click(function(){d.preview()});
a("#backSystemTemplates").button({disabled:true}).unbind("click").click(function(){if(confirm("\u786e\u8ba4\u8981\u91cd\u65b0\u8bbe\u8ba1\u6b64\u6a21\u677f\u5417\uff1f"))document.location.href="/router/member/designer/systemplates/"+a("#designer").designer("option","tid")});d._pagesDialogInit();a("#changePageDesigner").button({disabled:true}).unbind("click").click(function(){a("#pageDesignerDialog").dialog("open")})},_viewCommission:function(){a("#wrap .widget-customer").each(function(){previewCommission(a(this))});
a(".widget-itemslinkview-items dt,.widget-itemsthumbview-items li,.widget-itemslistview-items li,.widget-itemsrotatorview-items li,.widget-itemszoomview-items li,.widget-itemsappleview-items td,.widget-itemscycleview-items .pic,.widget-itemsscrollableview-items .d-a-i").each(function(){addViewCommission(a(this))})},_pagesDialogInit:function(){a("#pageDesignerDialog").dialog({bgiframe:true,autoOpen:false,height:500,width:900,zIndex:1E5,modal:true,open:function(){a("#pages-tbody").empty().append("<tr><td>"+
("1"==a("#designerStatus").val()?'<a style="color:#00E;cursor:pointer;font-weight:bold;" href="http://shop'+USERID+'.xintaonet.com" target="_blank">'+a("#designerSiteTitle").val()+"</a>":a("#designerSiteTitle").val())+"</td><td>http://shop"+USERID+".xintaonet.com</td><td>"+("1"==a("#designerStatus").val()?"\u5df2\u53d1\u5e03":"\u672a\u53d1\u5e03")+'</td><td><a href="/router/member/designer?siteId='+a("#designerSiteId").val()+'" style="color:#00E;cursor:pointer;font-weight:bold;">\u8bbe\u8ba1\u9996\u9875</a></td></tr>');
var d=a("body").data("pages");if(!d||d==null)a("#pages-tbody").append("<tr><td colspan=4>\u60a8\u8fd8\u6ca1\u6709\u65b0\u589e\u5176\u4ed6\u9875\u9762\u3002\u8bf7\u8fdb\u5165\u6211\u7684\u65b0\u6dd8\u7f51-\u6211\u7684\u6dd8\u7ad9-\u9875\u9762\u7ba1\u7406-\u65b0\u589e\u9875\u9762</td></tr>");else{for(var e in d){var f=d[e];a("#pages-tbody").append("<tr><td>"+(1==f.status?'<a href="http://shop'+USERID+".xintaonet.com/pages/"+f.created+'.html" target="_blank" style="color:#00E;cursor:pointer;font-weight:bold;">'+
f.name+"</a>":'<span style="color:gray;">'+f.name+"</span>")+"</td><td>http://shop"+USERID+".xintaonet.com/pages/"+f.created+".html</td><td>"+(1==f.status?"\u5df2\u53d1\u5e03":"\u672a\u53d1\u5e03")+'</td><td><a class="page-designer-a" style="color:#00E;cursor:pointer;font-weight:bold;" tid="'+f.id+'">\u8bbe\u8ba1\u6b64\u9875\u9762</a></td></tr>')}a(".page-designer-a",a(this)).click(function(){if(confirm("\u60a8\u786e\u5b9a\u8981\u5207\u6362\u9875\u9762\u8bbe\u8ba1\u5417\uff1f"))document.location.href=
"/router/member/designer?tid="+a(this).attr("tid")})}}})},_layoutTabInit:function(){var d=this;a("#view-contents ul").sortable({revert:true});a("#view-contents-add").button().click(function(){a("#content-layouts").show()});a('#content-layouts button[name="view-contents-add-layout"]').button().unbind("click").click(function(){var e=a(this).attr("layout");e&&a("#view-contents ul").append(d.addViewLayoutLi(e));a("#content-layouts").hide()});a("#view-contents-save").button().click(function(){d.saveLayout()});
a("#view-contents-cancel").button().click(function(){d.element.tabs("select",-1)})},saveLayout:function(){var d=this;if(b.length>0)for(var e=0;e<b.length;e++)a("#"+b[e]).remove();var f=[];a("#view-contents ul li").each(function(){var g=null;if(a(this).attr("cid")){g=a("#"+a(this).attr("cid"));a("div",a(this)).each(function(){g.append(a("."+a(this).attr("class"),g))});if(g.find(".ui-designer-container").length>1)a.browser.msie&&a.browser.version=="6.0"?g.find(".ui-designer-container:last").css("margin-right",
0).siblings().css("margin-right",2):g.find(".ui-designer-container:last").css("margin-right",0).siblings().css("margin-right",5);a("#main").append(g)}else{var h='<div class="ui-designer-content">';a("div",a(this)).each(function(){h+='<div class="ui-designer-container '+a(this).attr("class")+'"></div>'});h+="</div>";g=a(h);a("#main").append(g);f.push(g)}});if(f.length>0)for(e=0;e<f.length;e++)f[e].designerContent();d.element.tabs("select",-1);DesignerUtils.initWidgetBarPermission()},_layoutTab:function(){var d=
this;b=[];var e=a("#view-contents ul");e.empty();a("#main .ui-designer-content").each(function(){var f=a('<li cid="'+a(this).attr("id")+'" style="opacity: 1; filter:Alpha(Opacity=100);" title="\u53cc\u51fb\u5b9a\u4f4d\u6b64\u5bb9\u5668">'+d.createViewLayout(a(this))+'<span class="deleteImg ui-icon ui-icon-closethick" title="\u5220\u9664\u6b64\u5e03\u5c40"/></li>');f.dblclick(function(){var g=a(this).attr("cid"),h=a("#"+g).offset().top-a("#ui-designer-topbar").height()-10;a("html,body").animate({scrollTop:h},
500);a(this).toggleClass("ui-selected").siblings().removeClass("ui-selected");c!=null&&c.close();c=a("#"+g).expose({api:true,color:"#456"});c.load()}).hover(function(){a(this).toggleClass("ui-selecting").siblings().removeClass("ui-selecting");a(".w-arrow,.e-arrow,.content-desc",this).show()},function(){a(this).removeClass("ui-selecting");a(".w-arrow,.e-arrow,.content-desc",this).hide()});a(".deleteImg",f).unbind("click").click(function(){if(window.confirm("\u5220\u9664\u5e03\u5c40\u5c06\u79fb\u9664\u8be5\u5e03\u5c40\u4e2d\u6240\u6709\u7ec4\u4ef6,\u60a8\u786e\u5b9a\u8981\u8fd9\u4e48\u505a\u5417?")){var g=
a(this).parents("li");b.push(g.attr("cid"));g.remove()}});d.bindClickArrow(f);e.append(f)})},bindClickArrow:function(d){a(".w-arrow",d).unbind("click").click(function(){var e=a(this).parent(),f=e.prevAll("div:first");f.length==0?d.append(e):f.before(e)});a(".e-arrow",d).unbind("click").click(function(){var e=a(this).parent(),f=e.nextAll("div:first");f.length==0?d.prepend(e):f.after(e)})},addViewLayoutLi:function(d){var e=this;d=a('<li style="opacity: 1; filter:Alpha(Opacity=100);">'+e.addViewLayout(d)+
'<span class="deleteImg ui-icon ui-icon-closethick" title="\u5220\u9664\u6b64\u65b0\u589e\u5e03\u5c40"/><img class="new" src="/designer/assets/images/new.gif"/></li>');d.hover(function(){a(this).toggleClass("ui-selecting").siblings().removeClass("ui-selecting");a(".w-arrow,.e-arrow,.content-desc",this).show()},function(){a(this).removeClass("ui-selecting");a(".w-arrow,.e-arrow,.content-desc",this).hide()});a(".deleteImg",d).unbind("click").click(function(){window.confirm("\u60a8\u786e\u5b9a\u8981\u5220\u9664\u6b64\u65b0\u589e\u5e03\u5c40\u5bb9\u5668\u5417?")&&
a(this).parents("li").remove()});e.bindClickArrow(d);return d},addViewLayout:function(d){var e="";switch(d){case "1-3":e='<div class="left-1-3" align="center"><span class="content-desc">1</span><span class="w-arrow ui-icon ui-icon-arrowthick-1-w" title="\u5411\u5de6\u79fb\u52a8"/><span class="e-arrow ui-icon ui-icon-arrowthick-1-e" title="\u5411\u53f3\u79fb\u52a8"/></div><div class="right-1-3" align="center"><span class="content-desc">2</span><span class="w-arrow ui-icon ui-icon-arrowthick-1-w" title="\u5411\u5de6\u79fb\u52a8"/><span class="e-arrow ui-icon ui-icon-arrowthick-1-e" title="\u5411\u53f3\u79fb\u52a8"/></div>';
break;case "1-3-1":e='<div class="left-1-3-1" align="center"><span class="content-desc">1</span><span class="w-arrow ui-icon ui-icon-arrowthick-1-w" title="\u5411\u5de6\u79fb\u52a8"/><span class="e-arrow ui-icon ui-icon-arrowthick-1-e" title="\u5411\u53f3\u79fb\u52a8"/></div><div class="middle-1-3-1" align="center"><span class="content-desc">2</span><span class="w-arrow ui-icon ui-icon-arrowthick-1-w" title="\u5411\u5de6\u79fb\u52a8"/><span class="e-arrow ui-icon ui-icon-arrowthick-1-e" title="\u5411\u53f3\u79fb\u52a8"/></div><div class="right-1-3-1" align="center"><span class="content-desc">3</span><span class="w-arrow ui-icon ui-icon-arrowthick-1-w" title="\u5411\u5de6\u79fb\u52a8"/><span class="e-arrow ui-icon ui-icon-arrowthick-1-e" title="\u5411\u53f3\u79fb\u52a8"/></div>';
break;case "1":e='<div class="middle-1" align="center"><span class="content-desc">1</span><span class="w-arrow ui-icon ui-icon-arrowthick-1-w" title="\u5411\u5de6\u79fb\u52a8"/><span class="e-arrow ui-icon ui-icon-arrowthick-1-e" title="\u5411\u53f3\u79fb\u52a8"/></div>';break;case "1-1":e=e='<div class="left-1-1" align="center"><span class="content-desc">1</span><span class="w-arrow ui-icon ui-icon-arrowthick-1-w" title="\u5411\u5de6\u79fb\u52a8"/><span class="e-arrow ui-icon ui-icon-arrowthick-1-e" title="\u5411\u53f3\u79fb\u52a8"/></div><div class="right-1-1" align="center"><span class="content-desc">2</span><span class="w-arrow ui-icon ui-icon-arrowthick-1-w" title="\u5411\u5de6\u79fb\u52a8"/><span class="e-arrow ui-icon ui-icon-arrowthick-1-e" title="\u5411\u53f3\u79fb\u52a8"/></div>';
break;case "1-1-1":e='<div class="left-1-1-1" align="center"><span class="content-desc">1</span><span class="w-arrow ui-icon ui-icon-arrowthick-1-w" title="\u5411\u5de6\u79fb\u52a8"/><span class="e-arrow ui-icon ui-icon-arrowthick-1-e" title="\u5411\u53f3\u79fb\u52a8"/></div><div class="middle-1-1-1" align="center"><span class="content-desc">2</span><span class="w-arrow ui-icon ui-icon-arrowthick-1-w" title="\u5411\u5de6\u79fb\u52a8"/><span class="e-arrow ui-icon ui-icon-arrowthick-1-e" title="\u5411\u53f3\u79fb\u52a8"/></div><div class="right-1-1-1" align="center"><span class="content-desc">3</span><span class="w-arrow ui-icon ui-icon-arrowthick-1-w" title="\u5411\u5de6\u79fb\u52a8"/><span class="e-arrow ui-icon ui-icon-arrowthick-1-e" title="\u5411\u53f3\u79fb\u52a8"/></div>';
break}return e},createViewLayout:function(d){var e="",f=0;a(".ui-designer-container",d).each(function(){var g=a(this).attr("class").split(" ")[1];e+='<div class="'+g+'"><span class="content-desc">'+ ++f+'</span><span class="w-arrow ui-icon ui-icon-arrowthick-1-w" title="\u5411\u5de6\u79fb\u52a8"/><span class="e-arrow ui-icon ui-icon-arrowthick-1-e" title="\u5411\u53f3\u79fb\u52a8"/></div>'});return e},_refreshGroups:function(){a("#designer-loading").show();DesignerUtils.loadItemGroups(function(){a("#main .ui-designer-container .ui-designer-widget").each(function(){var d=
a(this),e=d.attr("name"),f=d[e]("option");f.gid&&f.gid.length>0&&f.gid!="0"&&d[e]("refresh","group");DesignerUtils.initWidgetBarPermission()});a("#designer-loading").hide()})}})})(jQuery);(function(a){a.widget("ui.designerWidget",{options:{align:"left",version:"1.0"},noPicture:"/assets/min/images/nopicture.gif",toSource:function(b){var c=this.element,d='<div class="ui-designer-widget"  name="'+c.attr("name")+'" style="display:block;width:100%;';if("true"!=this.options.autoSize)d+="height:"+c.height()+"px;";d+=(this.options.position?"position:"+this.options.position:"")+"\" metadata='"+DesignerUtils.json2str(this.options)+"' align=\""+this.options.align+'">';var e=c.find(".ui-designer-widget-header");
c=e.find(".widget-title").clone().removeAttr("title");var f=e.find(".ui-designer-widget-more").clone();this.options.gid&&this.options.gid.length>0&&this.options.gid!="0"?f.attr("href","/group/"+this.options.gid+".html"):f.attr("href","#");"\u53cc\u51fb\u7f16\u8f91\u6807\u9898"==c.text()&&c.text("");if(e.length>0){e=e.find(".ui-designer-widget-shops-more");if(e.length>0)f=e.clone().attr("href","/router/site/shops/14?pid=%7Bpid%7D");d+='<div class="ui-designer-widget-header" align="left" style="cursor:default;">'+
a("<div></div>").append(c).append(f).html()+"</div>"}d+=this._toSource(b)+"</div>";return d},refresh:function(b){this._refresh(b)},restoreWidget:function(){var b=this.element.attr("metadata");if((b=eval("("+b+")"))&&b!=null)for(var c in b)c=="clickUrl"?this._setOption(c,b[c].replace("mm_10011550_0_0",PID).replace("mm_13667242_0_0",PID)):this._setOption(c,b[c])},widgetOver:function(){if(isWidgetHandle){if("true"==this.options.resizable){a("#custome-bar,.custome-bar-border").remove();var b=this.element.css("border-bottom-style"),
c=a("#ui-designer-widget-handle");this.element.prepend(c);b!="inset"&&this.element.css("border-bottom","2px inset #348feb")}else{c=a("#ui-designer-widget-handle");this.element.prepend(c)}c.width(this.element.width());this._widgetOver()}},widgetOut:function(){if(isWidgetHandle){this.element.css("border-bottom-style")=="inset"&&this.element.css("border","").css("margin-top",0).css("margin-left",0);var b=a("#ui-designer-widget-handle");b.hide();a("body").append(b);this._widgetOut()}},widgetName:function(){return this.element.attr("name")},
storeGroups:function(b){var c=a("body").data("gids");if(c==null)c=b;else if(c.indexOf(b)==-1)c+=","+b;a("body").data("gids",c)},_items:function(){var b=this.options.gid,c=this.options.sortBy,d=null;if(b&&b!=null&&b!="0")d=a("body").data("g_"+b).slice();if(d!=null&&d.length>0&&c){if(c=="sortOrder_asc")return d;var e=c.replace("_asc"," asc").replace("_desc"," desc").split(" ");"asc"==e[1]?d.sort(function(f,g){try{var h=f[e[0]]-g[e[0]];return h?h:f.sortOrder-g.sortOrder}catch(i){return false}}):d.sort(function(f,
g){try{var h=g[e[0]]-f[e[0]];return h?h:f.sortOrder-g.sortOrder}catch(i){return false}})}return d},_create:function(){this._createDesignerWidget()},_init:function(){var b=this,c=this.options;widget=b.element;b.restoreWidget();var d=widget.parent().width();widget.width(d);var e=0,f=0,g="s,e,se";if(c.minWidth)e=c.minWidth;if(c.minHeight)f=c.minHeight;if(c.handles)g=c.handles;c.align&&widget.attr("align",c.align);"true"==c.resizable&&widget.resizable({autoHide:true,handles:"s",minWidth:e,minHeight:f,
maxWidth:d,start:function(){isWidgetHandle=false},stop:function(){isWidgetHandle=true;b.refresh("resizable")}});widget.hover(function(){b.widgetOver()},function(){b.widgetOut()});DesignerUtils.displaySize(a(".ui-resizable-handle",widget));b._initDesignerWidget();var h=widget.find(".ui-designer-widget-header");if(h.length>0){h.attr("title","\u53cc\u51fb\u7f16\u8f91\u6807\u9898");a(".ui-designer-widget-more",h).removeAttr("href").unbind("click").click(function(){var i=c.gid;if(i&&i.length>0&&i!="0"){a("#itemsMoreVersion").val(Math.random());
a("#itemsMorePid").val(PID);a("#itemsMore").attr("action","/group/"+i+".html");a("#itemsMore").submit()}else alert("\u5c1a\u672a\u914d\u7f6e\u63a8\u5e7f\u7ec4")}).show();d=a(".widget-title",widget);d.text()==""&&d.text("\u53cc\u51fb\u7f16\u8f91\u6807\u9898");a("#tinymce");h.dblclick(function(){var i=h.find(".widget-title");a("#widgetTitleInput").val(i.text());a("#widgetTitleDialog").dialog("open");editingTitle=i})}},addWidgetSelf:function(){a(this).removeClass("ui-draggable");a(".ui-designer-widget-helper",
a(this)).remove();var b=parseInt(a(this).css("borderLeftWidth")),c=parseInt(a(this).css("borderRightWidth"));if(isNaN(b))b=0;if(isNaN(c))c=0;a(this).width(a(this).parent().width()-b-c);this.refresh()},_initDesignerWidget:function(){},_createDesignerWidget:function(){},_toSource:function(){},_refresh:function(){},_widgetOver:function(){},_widgetOut:function(){}})})(jQuery);
(function(a){var b=["itemsLinkView","itemsThumbView","itemsListView","itemsScrollableView"];a.widget("ui.designerMacroWidget",a.ui.designerWidget,{options:{gid:"0",sortBy:"sortOrder_asc"},widgetSet:function(){editingGroupEditor=this.element;a("#widget-groups-dialog").dialog("open")},widgetOver:function(){if(isWidgetHandle){if("true"==this.options.resizable){a("#custome-bar,.custome-bar-border").remove();var c=this.element.css("border-bottom-style"),d=a("#ui-designer-widget-handle");this.element.prepend(d);
c!="inset"&&this.element.css("border-bottom","2px inset #348feb")}else{d=a("#ui-designer-widget-handle");this.element.prepend(d)}d.width(this.element.width());c=this.element.attr("name");a.inArray(c,b)==-1?a("#widgetSet").hide():a("#widgetSet").show();this._widgetOver()}},_toSource:function(c){if(true==c){c=a("body").data("g_"+this.options.gid);if(!this.options.gid||this.options.gid==null||this.options.gid=="0"||!c||c.length==0){this.element.expose({api:true,color:"#456"}).load();throw new Error("\u60a8\u7684\u9875\u9762\u4e2d\u8fd8\u6709\u63a8\u5e7f\u7ec4\u7c7b\u7ec4\u4ef6\u6ca1\u6709\u914d\u7f6e\u63a8\u5e7f\u7ec4");
}}c=this.element.attr("name");var d=this._toMacro(),e="<@w."+c+" sortBy='"+this.options.sortBy+"' ";e+=d;e+="></@w."+c+">";return e},_toMacro:function(){}})})(jQuery);(function(a){var b;a.widget("ui.widgetHandle",{options:{},display:function(){a("#widgetSet").show();a("#ui-designer-widget-handle").fadeIn();isDragWidget?a("#add-widget").hide():a("#add-widget").fadeIn()},_restoreChannel:function(){var c=a("#ui-designer-widget-handle").parent(),d=c.attr("name");a("#channelsSelect").val(c[d]("option","value"))},_restoreCustomeWidget:function(){},_restoreGroups:function(){var c=a("#ui-designer-widget-handle").parent(),d=c.attr("name"),e=c[d]("option","gid");c=c[d]("option",
"sortBy");e&&e.length>0&&a('#itemGroups option[value="'+e+'"]').length>0?a("#itemGroups").val(e):a("#itemGroups").val(0);c&&a("#itemsSortBy").val(c).show()},_create:function(){},_init:function(){b=this;o=b.options;a.browser.msie&&a.browser.version=="6.0"&&a("#ui-designer-widget-handle").attr("title","").css("cursor","auto");a("#add-widget").click(function(){try{editingWidget=a("#ui-designer-widget-handle").parent();a("#designer-widgets-dialog").dialog("open")}catch(c){}return false});a("#moveUp").click(function(){var c=
a("#ui-designer-widget-handle").parent(),d=c.prevAll(".ui-designer-widget:first");d.length==0?c.parent().append(c):d.before(c)});a("#moveDown").click(function(){var c=a("#ui-designer-widget-handle").parent(),d=c.nextAll(".ui-designer-widget:first");d.length==0?c.parent().prepend(c):d.after(c)});a("#widgetSet",a("#ui-designer-widget-handle")).unbind("click").click(function(){var c=a("#ui-designer-widget-handle").parent(),d=c.attr("name");c[d]("widgetSet")});a("#widgetRemove",a("#ui-designer-widget-handle")).unbind("click").click(function(){var c=
a("#ui-designer-widget-handle").parent();confirm("\u60a8\u786e\u5b9a\u8981\u5220\u9664\u6b64\u7ec4\u4ef6\u5417\uff1f")&&b._removeWidget(c)})},_removeWidget:function(c){a("#ui-designer-widget-handle").hide();a("body").prepend(a("#ui-designer-widget-handle"));if(!(c==null||!c))if(c.hasClass("ui-designer-widget")){var d=c.siblings().length,e=c.parents(".ui-designer-container");c.remove();isDragWidget==false&&d==0&&e&&e.prepend(addWidgetA())}},_loading:a('<div class="ui-designer-loading">\u6b63\u5728\u52a0\u8f7d\u6570\u636e,\u8bf7\u7a0d\u5019...<img src="/designer/assets/images/loading.gif"/></div>'),
loading:function(){a("#ui-designer-widget-handle").parent().prepend(b._loading);b._loading.show()},complete:function(){b._loading.hide();b._loading.remove()},items:function(c,d){d&&d!=null&&a("body").data("g_"+c,d);return a("body").data("g_"+c)},loadItems:function(){var c=a("#ui-designer-widget-handle").parent(),d=c.attr("name"),e=c[d]("option","gid");b.loading();(new WindSender("/router/member/designer/itemgroup/"+e)).load("GET",{},function(f){if(f.isSuccess()){f.body.length>0&&b.items(e,f.body);
b.complete();c[d]("refresh","group")}else{alert(f.msg);b.complete()}})},groups:function(c){c=a("#ui-designer-widget-handle").parent();var d=c.attr("name");a("#itemGroups").show().unbind("change").change(function(){var e=a(this).val();if(e=="")alert("\u672a\u9009\u4e2d\u63a8\u5e7f\u7ec4");else if(b.items(e)==null){c[d]("option","gid",e);b.loadItems()}else c[d]("refresh","group")});c[d]("refresh","group")}})})(jQuery);var noPicture="/assets/min/images/nopicture.gif";
function checkPID(a){a||(a=PID);$("body").append('<div id="checkPID" align="center"><div id="checkPID-desc"><h2>PID\u6b63\u5728\u68c0\u6d4b\u4e2d...</h2></div><button class="close" style="padding:2px;cursor:pointer;">\u5173\u95ed</button></div>');$("#checkPID").overlay({top:200,mask:{color:"lightSlateGray",opacity:1},closeOnClick:false,load:true});var b=[],c=[],d=$("a"),e=$("iframe");d.each(function(){var f=$(this).attr("href");if(f&&typeof f=="string"&&""!=f){f=f.match(/mm_\d{0,24}_\d{0,24}_\d{0,24}/gi);
if(f!=null)for(var g=0;g<f.length;g++){var h=f[g];h!=a&&b.push({n:$(this),v:h})}}});e.each(function(){var f=$(this).attr("src");if(f&&typeof f=="string"&&""!=f){f=f.match(/mm_\d{0,24}_\d{0,24}_\d{0,24}/gi);if(f!=null)for(var g=0;g<f.length;g++){var h=f[g];h!=a&&c.push({n:$(this),v:h})}}});if(b.length>0)for(e=0;e<b.length;e++)b[e].n.attr("title","\u5f53\u524d\u94fe\u63a5\u542b\u9519\u8befPID\u3010"+b[e].v+"\u3011").css("border","2px solid red");$("#checkPID-desc").empty().append('<h2>PID\u68c0\u6d4b\u7ed3\u679c:</h2><p style="font-size:14px;padding-top:10px;">\u672c\u6b21\u5171\u68c0\u6d4b\u3010<strong>'+
d.length+"</strong>\u3011\u4e2a\u94fe\u63a5,\u5176\u4e2d\u6709\u3010<strong>"+b.length+"</strong>\u3011\u4e2a\u9519\u8bef\u94fe\u63a5\uff0c\u542b\u9519\u8befPID\u7684\u94fe\u63a5\u5df2\u7ecf\u6807\u8bc6\u5728\u5f53\u524d\u9875\u9762</p>")}
function toggleIframe(a,b){document.getElementById("ew-tab-item0").className="ew-tab-item-0";document.getElementById("ew-tab-item1").className="ew-tab-item-1";document.getElementById("ew-tab-item2").className="ew-tab-item-2";document.getElementById("tabPanel0").style.display="none";document.getElementById("tabPanel1").style.display="none";document.getElementById("tabPanel2").style.display="none";document.getElementById(a).className+=" selected";document.getElementById(b).style.display="block"}
function convertTitle(a){if(a&&a.indexOf("span")!=-1)return a.replace("<span class=H>","").replace("</span>","");return a}function restoreTitle(a){if(a&&a.indexOf("\u5305\u90ae")!=-1)return a.replace("\u5305\u90ae","<span class=H>\u5305\u90ae</span>");return a}
function addWidgetA(){var a=$('<div class="add-widget-a">\u6dfb\u52a0\u65b0\u7ec4\u4ef6</div>');a.click(function(){try{$("#designer-widgets-dialog .add-widget-button").each(function(){var c=$(this).attr("minWidth");if(c){c=parseInt(c);c>a.parent().width()?$(this).button("disable"):$(this).button("enable")}else $(this).button("enable")});editingWidget=a.parent();$("#designer-widgets-dialog").dialog("open")}catch(b){}return false}).hover(function(){$(this).css("background","white")},function(){$(this).css("background",
" #E8EAEA")});return a}
var WidgetUtils={widgetLiLayout:function(a){var b=a.width();if(b)if(!isNaN(b)){var c=a.find("li:first").width(),d=Math.floor(b/c);if(d==1)a.find("li").css("margin-left",Math.floor((b-c)/2));else{var e=Math.floor((b%c-30)/(d-1)),f=1;a.find("li").each(function(){switch(f%d){case 0:$(this).css({"margin-left":e+"px","margin-right":"10px"});break;case 1:$(this).css({"margin-left":"10px","margin-right":"0px"});break;default:$(this).css({"margin-left":e+"px","margin-right":"0px"})}f++})}}},addHeaderFlash:function(a){try{var b=
a.attr("src");if(!(!b||b=="")){a.show().empty();var c=b.split(".swf")[0].split("_"),d=c[c.length-1].split("x"),e={src:b,wmode:"opaque",width:parseInt(a.parent().width()-2),height:parseInt(d[1])-2};a.width(a.parent().width());a.height(parseInt(d[1]));a.parent().height(parseInt(d[1]));a.flashembed(e);this.flashWidget_preLoader(a)}}catch(f){$.log(f)}},addHeaderImage:function(a){try{var b=a.attr("src"),c=a.attr("href");if(!(!b||b=="")){if(c&&c.indexOf("http://")==-1)c="http://"+c;var d=new Image;d.onload=
function(){a.parent().height(d.height)};d.src=b;a.show().empty().append('<a href="'+c+'" target="_blank"><img src="'+b+'"/></a>')}}catch(e){$.log(e)}},addHeaderSmartAdsFlash:function(a){try{a.show().empty();var b={catid:"",count:"20",sz:"15",type:"2",i:PID};a.height(90);a.parent().height(90);a.flashembed({src:"http://a.alimama.cn/widget/yr1/yr1fixed_950_90.swf",wmode:"opaque",width:950,height:90},b);this.flashWidget_preLoader(a);$("#ui-designer-header .ui-designer-header-tabs").position().top>65&&
$(".ui-designer-header-tabs").css("top",65)}catch(c){$.log(c)}},searchBox_init:function(a){var b=$(".preview_content",a);if(b.length==1){var c=a.parent();a={};a=isDesigner?c.searchBox("option"):eval("("+c.attr("metadata")+")");var d=a.line,e=a.cat;d==0?$("ul.words,br",b).remove():$.getScript("/assets/min/js/keywords.min.js",function(){var f=[],g=parseInt((c.width()-10)/40);if(e!="0")for(var h in keywords[e].sub)f.push([keywords[e].sub[h].w,keywords[e].sub[h].c]);else for(var i in keywords)for(h in keywords[i].sub)f.push([keywords[i].sub[h].w,
keywords[i].sub[h].c]);f.sort(function(){return Math.random()>0.5?-1:1});if(f.length<d*g){var j=[];for(i in keywords)for(h in keywords[i].sub){if(f.length+j.length>d*g)break;j.push([keywords[i].sub[h].w,keywords[i].sub[h].c])}j.sort(function(){return Math.random()>0.5?-1:1});f=f.concat(j)}$("ul.words,br",b).remove();for(i=0;i<d;i++){j=$('<ul class="words" style="width:'+(c.width()-10)+'px;font-size:12px;"></ul>');for(h=0;h<g;h++)j.append('<li><a target="_blank" href="/search?q='+encodeURIComponent(f[h+
i*g][0])+"&cid="+f[h+i*g][1]+'">'+f[h+i*g][0]+"</a></li>");b.append(j)}b.append('<br style="clear:both;">')})}},itemsThumbView_init:function(a){isDesigner&&WidgetUtils.widgetLiLayout(a.show())},topicView_init:function(a){a.css("margin-left","0px").show();if(isDesigner){$("li a",a).each(function(){var b=$(this).attr("href").replace("%7Bpid%7D",PID);$(this).attr("href",b)});WidgetUtils.widgetLiLayout(a)}return a},catsListView_init:function(a){a.width(a.parent().width());isDesigner&&$("li a",a).each(function(){var b=
$(this).attr("href").replace("%7Bpid%7D",PID).replace("%7Bpid%7D",PID);$(this).attr("href",b)})},designerHeaderTabs_init:function(a){isDesigner&&$("ul li",a).each(function(){var b=$("a",$(this)),c=b.attr("href").replace("%7Bpid%7D",PID).replace("%7Bpid%7D",PID);b.attr("href",c)})},itemsLinkView_init:function(a){$("li:first",a.show()).css("border-top","1px solid 1px solid #EBEBEB")},itemsRotatorView_init:function(a){a.show();$(".main_image .desc",a).show();var b=$(".image_thumb ul li:first",a);if(b.length!=
0){WidgetUtils.itemsRotatorView_showMain(a,b);$(".image_thumb ul li",a).click(function(){var c=$(this);$(".main_image",a);if(c.is(".active"))return false;else WidgetUtils.itemsRotatorView_animateMain(a,c);c.addClass("active").siblings().removeClass("active");return false}).hover(function(){$(this).addClass("hover")},function(){$(this).removeClass("hover")})}},itemsRotatorView_showMain:function(a,b){var c=a.find(".main_image"),d=b.find("img").attr("alt");a=restoreTitle(d);var e=b.find("a").attr("href");
if(e!=noPicture)e=e.replace("bao/uploaded","imgextra")+"_310x310.jpg";var f=b.find(".title");f.attr("commission");var g=f.attr("price");f=f.attr("href");$(".desc .title",c).empty().append('<a href="'+f+'" target="_blank" title="'+d+'">'+a+"</a>");$(".desc .price",c).text(g+"\u5143");$("img",c).fadeTo("medium",0.5).attr("alt",d).attr("title",d);d=$("img",c).parent();d.attr("href",f);if(!isDesigner)if(b.attr("nid")){d.attr("onClick","_gaq.push(['_trackEvent', 'xt-"+PID+"', 'item-d-"+b.attr("nk")+"-"+
b.attr("nid")+"', '"+a+"']);");$(".desc .title a",c).attr("onClick","_gaq.push(['_trackEvent', 'xt-"+PID+"', 'item-d-"+b.attr("nk")+"-"+b.attr("nid")+"', '"+a+"']);")}b=new Image;b.onload=function(){$("img",c).fadeTo("fast",1).attr({src:e})};b.src=e},itemsRotatorView_animateMain:function(a,b){var c=this,d=a.find(".main_image"),e=d.find(".title").height();$(".title",d).animate({marginBottom:-e},250,function(){$(".title",d).animate({marginBottom:"0"},250);c.itemsRotatorView_showMain(a,b)}).show()},
itemsZoomView_init:function(a){var b=this;a.show();b.itemsZoomView_init_func(a,$(".thumb li a:first",a));$.browser.msie&&$.browser.version=="6.0"||$(".thumb li .div-cell",a).hover(function(){$(this).css({"z-index":"10"});$("img",$(this));$(this).find(".a-cell").addClass("hover").stop().animate({marginTop:"-100px",marginLeft:"-100px",top:"50%",left:"50%",width:"160px",height:"160px",padding:"20px"},200)},function(){$(this).css({"z-index":"0"});$(this).find(".a-cell").removeClass("hover").stop().animate({marginTop:"0",
marginLeft:"0",top:"0",left:"0",width:"100px",height:"100px",padding:"0px"},400)});$(".thumb li a",a).click(function(){b.itemsZoomView_init_func(a,$(this));return false})},itemsZoomView_init_func:function(a,b){var c=b.attr("href");$(".main-view img",a).fadeTo("medium",0.5);var d=new Image,e=b.attr("title"),f=restoreTitle(e);d.onload=function(){$(".main-view img",a).fadeTo("fast",1).attr({src:c,alt:e,title:e});var g=$(".main-view a:first",a).attr("href",b.attr("click")),h=$(".main-view .title a",a).empty().append(f).attr("href",
b.attr("click"));if(!isDesigner)if(b.attr("nid")){g.attr("onClick","_gaq.push(['_trackEvent', 'xt-"+PID+"', 'item-d-"+b.attr("nk")+"-"+b.attr("nid")+"', '"+f+"']);");h.attr("onClick","_gaq.push(['_trackEvent', 'xt-"+PID+"', 'item-d-"+b.attr("nk")+"-"+b.attr("nid")+"', '"+f+"']);")}$(".main-view .price",a).text(b.attr("price")+"\u5143")};d.src=c},itemsAppleView_init:function(a){$(".slides .slide",a).width(a.width()-2);a.show();$(".menu table tr td img",a).click(function(b){$("td.menuItem",a).removeClass("act").addClass("inact");
var c=$(this).parents("td");c.addClass("act");c=c.prevAll($(".menuItem",a)).length;$(".slides",a).stop().animate({marginLeft:-c*a.width()+"px"},450);b.preventDefault()});$(".menu table tr td.menuItem:first",a).addClass("act").siblings().addClass("inact")},itemsCycleView_init:function(a){a.show()},flashView_init:function(a){try{var b=a.attr("src");if(!b||b=="")a.height(200).parent().height(200);else{a.show().empty();var c=b.split(".swf")[0].split("_"),d=c[c.length-1].split("x"),e=a.parent().width();
a.width(e);var f=parseInt(d[1])+10;a.height(f-5);a.parent().height(f);a.flashembed({src:b,wmode:"opaque",width:e,height:f-10});this.flashWidget_preLoader(a)}}catch(g){$.log(g)}},itemsScrollableView_init:function(a){var b=a.parent();$(".navi",b).length==0&&$(".ui-designer-widget-header",b).append('<div class="navi"></div>');a.show();b=a.width(a.width()-2).height(200);if($(".item",b).width(a.width()-2).length>0){b.scrollable({circular:true});b.navigator({navi:a.parent().find(".navi").empty()});isDesigner||
b.autoscroll({interval:5E3})}},itemsSmartAdsFlashView_init:function(a){try{var b=a.show().parent(),c="http://a.alimama.cn/widget/yr1/yr1any.swf?r="+Math.random(),d={};d=isDesigner?b.itemsSmartAdsFlashView("option"):eval("("+b.attr("metadata")+")");d.h_h=b.height()-5;d.h_w=b.width()-5;a.empty();var e={src:c,wmode:"transparent",width:d.h_w+"",height:d.h_h+""},f={count:d.count+"",catid:d.catid+"",h_h:d.h_h+"",h_w:d.h_w+"",sz:d.sz+"",type:d.type+"",i:PID,st_tc:d.st_tc+"",st_bgc:d.st_bgc+"",st_bdc:d.st_bdc+
"",st_pc:d.st_pc+"",st_lg:d.st_lg+"",st_pb:d.st_pb+""};a.width(d.h_w);a.height(d.h_h);a.flashembed(e,f);this.flashWidget_preLoader(a)}catch(g){$.log(g)}},itemsFixedSmartAdsFlashView_init:function(a){try{var b=a.show().parent(),c={};c=isDesigner?b.itemsFixedSmartAdsFlashView("option"):eval("("+b.attr("metadata")+")");a.empty();var d=parseInt(c.height),e=parseInt(c.width),f=c.sz,g=parseInt(c.type),h=b.width();if(d=="0"||e=="0"||e>h){for(var i=null,j=0;j<fixedSmartAdsSz.length;j++)if(fixedSmartAdsSz[j].width<
h)if(i==null)i=fixedSmartAdsSz[j];else if(fixedSmartAdsSz[j].width>i.width)i=fixedSmartAdsSz[j];else if(fixedSmartAdsSz[j].width==i.width)if(fixedSmartAdsSz[j].height>i.height)i=fixedSmartAdsSz[j];if(i!=null){e=i.width;d=i.height;f=i.sz;g=i.type;isDesigner&&b.itemsFixedSmartAdsFlashView("option","type",g)}if(isDesigner){b.itemsFixedSmartAdsFlashView("option","height",d);b.itemsFixedSmartAdsFlashView("option","width",e);b.itemsFixedSmartAdsFlashView("option","sz",f)}}var l={src:"http://a.alimama.cn/widget/yr1/yr1fixed_"+
e+"_"+d+".swf?version"+Math.random(),wmode:"transparent",width:e+"",height:d+""},k={count:c.count+"",catid:c.catid+"",sz:f+"",type:g+"",i:PID};a.width(e);a.height(d+10);b.height(d+10);a.flashembed(l,k);this.flashWidget_preLoader(a)}catch(m){$.log(m)}},itemsShopWindowView_init:function(a){try{a.show().empty();var b=a.parent(),c={};c=isDesigner?b.itemsShopWindowView("option"):eval("("+b.attr("metadata")+")");var d={src:"http://bm.alimama.cn/bcv1.swf?v="+c.revision,wmode:"opaque",width:c.bannerWidth,
height:c.bannerHeight},e={bannerWidth:c.bannerWidth,bannerHeight:c.bannerHeight,bannerSID:c.bannerSID,bannerPID:PID,dataSource:c.dataSource,bid:c.bid,pid:PID,ass_rep:"pid%3D"+PID+"%26unid=%3D",appSource:c.appSource};a.height(c.bannerHeight);b.height(c.bannerHeight+10);a.flashembed(d,e);this.flashWidget_preLoader(a)}catch(f){$.log(f)}},channelView_init:function(a){a.show().empty();var b=a.parent(),c={};c=isDesigner?b.channelView("option"):eval("("+b.attr("metadata")+")");c=channels[c.value];var d=
$('<iframe frameborder="0" marginheight="0" marginwidth="0" border="0" id="alimamaifrm" name="alimamaifrm" scrolling="no" height="100%" width="100%"></iframe>'),e=c.clickUrl.replace("mm_10011550_0_0",PID).replace("mm_13667242_0_0",PID);d.attr("src",e).height(parseInt(c.height));a.height(c.height+5);b.height(c.height+5);a.append(d)},flashWidget_preLoader:function(a){var b=a.parent();b.find(".ui-designer-loading").remove();b.prepend('<div align="center" class="ui-designer-loading">\u6b63\u5728\u8f7d\u5165<span class="flash_p">0%</span>...</div>');
isDesigner&&b.resizable("disable");var c=a.children().first(),d=b.find(".flash_p");b.find(".ui-designer-loading").everyTime(1E3,"flash",function(){try{var e=c[0].PercentLoaded();d.text(e+"%");if(e==100){$(this).stopTime("flash");isDesigner?$(this).oneTime(3E3,"showflash",function(){b.find(".ui-designer-loading").remove();b.resizable("enable")}):b.find(".ui-designer-loading").remove()}}catch(f){$(this).stopTime("flash");isDesigner?$(this).oneTime(3E3,"showflash",function(){b.find(".ui-designer-loading").remove();
b.resizable("enable")}):b.find(".ui-designer-loading").remove()}})}};(function(a){a.widget("ui.huabaoEditor",{options:{},_create:function(){},_init:function(){var b=this;o=b.options;var c=b.element;c.dialog({bgiframe:true,autoOpen:false,resizable:false,width:780,height:500,zIndex:1E5,modal:true,buttons:{"\u53d6\u6d88":function(){c.dialog("close")},"\u786e\u5b9a":function(){if(editingHuabaoEditor==null)alert("\u672a\u9009\u62e9\u753b\u62a5\u7ec4\u4ef6");else{var d=a("#huabao-search .items .active");if(d.length==0)alert("\u5c1a\u672a\u9009\u62e9\u8981\u663e\u793a\u7684\u6307\u5b9a\u753b\u62a5");
else{editingHuabaoEditor.empty().append("<div id='loading' align='left'>\u6b63\u5728\u52a0\u8f7d\u6570\u636e,\u8bf7\u7a0d\u5019...</div>");a.ajax({url:"/router/huabao/html/"+d.attr("h")+"?v="+Math.random(),type:"POST",data:{nick:USERNICK},dataType:"html",beforeSend:function(e){e.setRequestHeader("WindType","AJAX");e.setRequestHeader("WindDataType","HTML")},error:function(e,f){a("#loading").remove();alert(f)},success:function(e){a("#loading").remove();editingHuabaoEditor.append(e);HID=d.attr("h");
HOTTYPE=d.attr("t");editingHuabaoEditor.parent().huabaoView()}});c.dialog("close")}}}}});a("#huabaoSearchButton").click(function(){var d=a("#huabaoEditorType li a.current"),e=0;if(d.length==1)e=d.attr("t");b._search(a("#huabaoSearchText").val(),e,1);return false});a("#huabaoEditorType li a").click(function(){a("#huabaoEditorType li a").removeClass("current");a(this).addClass("current");b._search(a("#huabaoSearchText").val(),a(this).attr("t"),1);return false}).hover(function(){a(this).removeClass("hover").addClass("hover").siblings().removeClass("hover")},
function(){a(this).removeClass("hover")})},_search:function(b,c,d){var e=this;a("#huabao-search").empty().append("<div id='loading' align='left'>\u6b63\u5728\u52a0\u8f7d\u6570\u636e,\u8bf7\u7a0d\u5019...</div>");a.ajax({url:"/router/huabao/designer/search",type:"POST",data:{words:b,type:c,pageNo:d},dataType:"html",beforeSend:function(f){f.setRequestHeader("WindType","AJAX");f.setRequestHeader("WindDataType","HTML")},error:function(f,g){a("#loading").remove();alert(g)},success:function(f){a("#loading").remove();
a("#huabao-search").html(f);a("#huabao-search .page-number").click(function(){e._search(b,c,a("a",a(this)).text());return false});a("#huabao-search .pgNext").click(function(){a(this).hasClass("pgEmpty")||e._search(b,c,a(this).attr("page"));return false});a("#huabao-search .h-d-a-i").click(function(){a("#huabao-search .h-d-a-i").removeClass("active");a(this).addClass("active")})}})}})})(jQuery);$(function(){initSearchWidget()});
function initSearchWidget(a){a||(a=$("body"));$(".prop-item .more",a).click(function(){if($(this).hasClass("close")){$(this).parent().find(".moreValue").show();$(this).text("\u6536\u8d77").removeClass("close").addClass("open")}else{$(this).parent().find(".moreValue").hide();$(this).text("\u66f4\u591a").removeClass("open").addClass("close")}return false});$(".J_PropToggler",a).click(function(){var b=$("a",$(this));if(b.hasClass("close")){$(".prop-item:gt(3)",$(this).parent()).show();$("span",b).text("\u6536\u8d77");
b.removeClass("close").addClass("open")}else{$(".prop-item:gt(3)",$(this).parent()).hide();$("span",b).text("\u66f4\u591a");b.removeClass("open").addClass("close")}return false});$(".prop-item li a",a).click(function(){var b=$(this).parents(".widget-customer:first");if($(this).hasClass("selected")){$(this).removeClass("selected");$('.selected-attr a[value="'+$(this).attr("value")+'"]',b).parent().remove();$(".selected-attr dd",b).length==0&&$(".selected-attr",b).hide()}else{$(".selected-attr",b).show();
$("a",$(this).parents("dd:first")).removeClass("selected");$(this).addClass("selected");var c=$(this).attr("value").split(":")[0];$('.selected-attr a[value*="'+c+':"]',b).parent().remove();c=$(this).parents(".prop-item").find("dt.search-prop");c=$('<dd><a value="'+$(this).attr("value")+'"><h5>'+c.text()+"</h5>"+$(this).text()+'<span class="close-icon"></span></a></dd>');$(".selected-attr dl",b).append(c);c.click(function(){$(this).remove();$('.prop-item a[value="'+$("a",this).attr("value")+'"]',b).removeClass("selected");
$(".selected-attr dd",b).length==0&&$(".selected-attr",b).hide()})}return false});$(".searchwidget-btn,.answer",a).click(function(){var b=$(this).parents(".widget-customer:first"),c="";$(".selected-attr dd a",b).each(function(){c+=$(this).attr("value")+";"});$('.searchCustome input[name="props"]',b).val(c);$(".searchCustome",b).submit()})};